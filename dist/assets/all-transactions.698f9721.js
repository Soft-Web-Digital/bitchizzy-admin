import{u as je,_ as Ne,a as Re,b as Be}from"./uploadImage.fc51e473.js";import{u as fe}from"./asset.1be9780c.js";import"./user.35ce0bfe.js";import{a as Pe,s as te,f as Ee,r as v,ai as Le,h as Me,as as qe,A as ze,o as u,c,b as e,w as t,a2 as S,ad as Ye,ay as Oe,a1 as me,m as i,t as p,a8 as He,I as We,D as C,a9 as ae,a6 as A,u as a,j as R,e as s,x as f,O as H,a7 as W,H as G,aE as ye,aq as U,aj as Ge,ak as L,at as Je,F as J,k as se,au as Ke,ar as Qe,av as Xe,T as Ze,aw as ge,an as el,ag as ll,ao as tl,i as al,M as sl,N as ol,q as nl,V as rl,p as K,v as Q,a3 as dl,a4 as ul}from"./index.d08b3963.js";import{u as he}from"./withdrawals.090f5e86.js";import{_ as il}from"./plugin-vue_export-helper.21dcd24c.js";import{u as cl}from"./index.f137f2c7.js";import"./filedownloader.f3cc1d55.js";import"./country.cb4beb97.js";const m=M=>(dl("data-v-0dcab0b0"),M=M(),ul(),M),pl=i(" Confirm "),_l=i("Cancel"),vl=i("Yes"),fl=m(()=>s("h2",{class:"my-3"},"Asset transactions",-1)),ml=m(()=>s("div",{class:""},[s("h4",null,"Total Earnings")],-1)),yl={key:0,class:"mt-11"},gl={class:"mb-2"},hl=m(()=>s("span",null,"All time",-1)),Vl={class:"ml-16 d-flex align-center justify-space-between w-100"},bl={class:"d-flex align-start justify-start flex-column w-100"},xl={key:0,class:"pl-3 my-5"},wl={class:"mb-2"},kl=m(()=>s("span",null,"Successful",-1)),Cl={class:"d-flex align-start justify-start flex-column w-100 flex-grow-1"},Al={key:0,class:"pl-3 my-5"},Tl={class:"mb-2"},Fl=m(()=>s("span",null,"pending",-1)),Dl={class:"d-flex align-start justify-start flex-column w-100 flex-grow-1"},Il={key:0,class:"pl-3 my-5"},Sl={class:"mb-2"},Ul=m(()=>s("span",null,"Failed",-1)),$l={class:"d-flex align-start justify-start flex-column w-100 flex-grow-1"},jl={key:0,class:"pl-3 my-5"},Nl={class:"mb-2"},Rl=m(()=>s("span",null,"Partial",-1)),Bl={class:"d-flex align-center justify-space-between w-100"},Pl=m(()=>s("h4",null,"Filter Options:",-1)),El=i("Reset"),Ll=i("Filter"),Ml=i("All"),ql=i("Pending"),zl=i("Approved"),Yl=i("Declined"),Ol=i("Partial"),Hl={key:0},Wl={class:"font-weight-bold"},Gl=i(" View Details "),Jl=i(" Approve Request "),Kl=i(" Partial Approval "),Ql=i(" Decline Request "),Xl={key:0,class:"font-weight-bold text-center my-3"},Zl=m(()=>s("h3",null,"Decline Transaction",-1)),et=m(()=>s("p",null,"Enter Reasons for Declining this asset transaction",-1)),lt=i("Submit"),tt={class:"mb-3 d-flex justify-space-between"},at=m(()=>s("h3",{class:"text-justify mt-7"},"Partial approval",-1)),st=m(()=>s("label",{for:"proof",class:"cursor-pointer"},[s("p",{class:"text-black"},"Upload transaction proof")],-1)),ot={key:0,for:"proof",class:"cursor-pointer"},nt=m(()=>s("img",{src:Re,alt:"card-placeholder",class:"mt-3 w-full object-fill max-h-[174px] rounded-xl"},null,-1)),rt=[nt],dt={class:"gap-5 mt-5",style:{display:"grid","grid-template-columns":"repeat(4, 80px)",gap:"12px"}},ut={style:{position:"relative"}},it=["src"],ct=["onClick"],pt={key:1,class:"pt-3 text-center"},_t={class:"p-2 block"},vt={key:2,for:"proof",class:"mt-4 d-flex align-center cursor-pointer"},ft=m(()=>s("img",{src:Be,alt:"plus icon"},null,-1)),mt=m(()=>s("p",{class:"ml-3 underline"},"Add more proof",-1)),yt=[ft,mt],gt=i("submit"),ht=Pe({__name:"all-transactions",setup(M){const{getAllTransactionCount:Ve}=he(),{asset_total:b}=te(he()),{permissions:be}=te(Ee()),{getAllAssetTransactions:y,approveAssetTransactions:xe,declineAssetTransactions:we,getSingleAssetTransactions:Vt,getAllAssetTransactionByTradeType:bt,getAllAssetTransactionsStatus:xt,getAllAssetTransactionByReference:wt,getAllAssetTransactionByDate:kt,partialApproveRequest:ke}=fe();let oe=v(!1),X=v(1),ne=v(1);const T=Le({review_amount:"",review_note:"",review_proof:[]}),$=v([]),Ce=(d,l)=>{$.value=$.value.filter(w=>w!==d),T.review_proof.splice(l,1)},Ae=d=>{oe.value=!0;let l=d.length,w=0;if(event){for(ne.value=d.length;l--;)je(d[w]).then(n=>{X.value++,$.value.push(n.secure_url),T.review_proof.push(n.secure_url)}),w++;X.value=0}},{allTransactions:q,loading:z,dialog:j,dialog2:N,single_transactions:Ct,page:V,tab:Z,status:_}=te(fe()),Te=v([{title:"No."},{title:"Full name"},{title:"Reference No."},{title:"Amount"},{title:"Date"},{title:"Trade Type"},{title:"Status"},{title:"Actions"}]),F=v(""),x=v(""),D=v(""),I=v(""),re=async()=>{await Ve(),await y(_.value,V.value,x.value,F.value,D.value,I.value)};let de=v(null);Me(()=>{re(),de.value=setInterval(re,12e4)}),qe(()=>{clearInterval(de.value)});const Fe=d=>d=="pending"?"yellow-darken-3":d=="approved"?"green lighten-3":d=="declined"?"red lighten-3":d=="partially_approved"?"purple lighten-3":"",De=d=>new Intl.NumberFormat().format(d),ue=v("");v("");const Ie=v(""),Se=d=>{Ie.value=d.target.files[0]},Ue=async()=>{_.value="",V.value=1,x.value="",F.value="",D.value="",I.value="",await y(_.value,V.value,x.value,F.value,D.value,I.value)},ie=async()=>{await y(_.value,V.value,x.value,F.value,D.value,I.value)},k=v(!1);let g=v("");const Y=v(""),ee=(d,l)=>{k.value=!0,g.value=l,Y.value=d},$e=async d=>{d=="approve"?(await xe(g.value),ie(),k.value=!1):d=="decline"?(we(g.value),k.value=!1):d=="partial"&&(ke(g.value,T),k.value=!1),k.value=!1};return ze([j,N],([d,l],[w,n])=>{d===!1&&l===!1&&ie()}),(d,l)=>{const w=al("vue-feather");return u(),c(J,null,[e(ae,{modelValue:k.value,"onUpdate:modelValue":l[2]||(l[2]=n=>k.value=n),width:"500"},{default:t(()=>[e(S,null,{default:t(()=>[e(Ye,{dark:"",dense:"",flat:""},{default:t(()=>[e(Oe,{class:"text-body-2 font-weight-bold grey--text"},{default:t(()=>[pl]),_:1})]),_:1}),e(me,{class:"pa-4 black--text"},{default:t(()=>[i("Are you sure you want to "+p(Y.value==="partial"?"partially approve":Y.value)+" this transaction?",1)]),_:1}),e(He,{class:"pt-3"},{default:t(()=>[e(We),e(C,{color:"grey",text:"",class:"body-2 font-weight-bold",onClick:l[0]||(l[0]=n=>k.value=!1)},{default:t(()=>[_l]),_:1}),e(C,{color:"primary",class:"body-2 font-weight-bold",outlined:"",onClick:l[1]||(l[1]=n=>$e(Y.value))},{default:t(()=>[vl]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,null,{default:t(()=>[e(A,{cols:"12",sm:"12",class:"mt-4"},{default:t(()=>{var n,B;return[fl,((n=a(be))==null?void 0:n.length)==18?(u(),R(W,{key:0,class:"my-3"},{default:t(()=>[e(A,{cols:"12",sm:"6",md:"4"},{default:t(()=>[e(S,{elevation:"0",class:"pa-6 h-100"},{default:t(()=>{var r;return[ml,((r=a(b))==null?void 0:r.length)>0?(u(),c("div",yl,[s("h2",gl," \u20A6\u200E "+p(De(a(b)[0].total_approved_transactions_amount)),1),hl])):f("",!0)]}),_:1})]),_:1}),e(A,{cols:"12",sm:"6",md:"8"},{default:t(()=>[e(S,{elevation:"0",class:"py-4 px-2"},{default:t(()=>{var r,P,h,E;return[s("div",Vl,[s("div",bl,[e(H,{color:"#e5fafb",size:"x-large"},{default:t(()=>[e(w,{type:"check-circle",class:"text-dark text-success"})]),_:1}),((r=a(b))==null?void 0:r.length)>0?(u(),c("div",xl,[s("h2",wl,p(a(b)[0].total_approved_transactions_count),1),kl])):f("",!0)]),s("div",Cl,[e(H,{color:"#FFF9C4",size:"x-large"},{default:t(()=>[e(w,{type:"bar-chart",class:"text-dark text-primary"})]),_:1}),((P=a(b))==null?void 0:P.length)>0?(u(),c("div",Al,[s("h2",Tl,p(a(b)[0].total_pending_transactions_count),1),Fl])):f("",!0)]),s("div",Dl,[e(H,{color:"#FFCCBC",size:"x-large"},{default:t(()=>[e(w,{type:"x-circle",class:"text-dark text-error"})]),_:1}),((h=a(b))==null?void 0:h.length)>0?(u(),c("div",Il,[s("h2",Sl,p(a(b)[0].total_declined_transactions_count),1),Ul])):f("",!0)]),s("div",$l,[e(H,{color:"purple",size:"x-large"},{default:t(()=>[e(w,{type:"check",class:"purple-lighten-1"})]),_:1}),((E=a(b))==null?void 0:E.length)>0?(u(),c("div",jl,[s("h2",Nl,p(a(b)[0].total_partially_approved_transactions_count),1),Rl])):f("",!0)])])]}),_:1})]),_:1})]),_:1})):f("",!0),e(S,{flat:"",rounded:"0",elevation:"0",class:"my-5 pa-4"},{default:t(()=>[s("div",Bl,[Pl,s("div",null,[e(C,{onClick:Ue,width:"200px",class:"mr-4"},{default:t(()=>[El]),_:1}),e(C,{onClick:l[3]||(l[3]=r=>a(y)(a(_),a(V),x.value,F.value,D.value,I.value)),width:"200px",color:"secondary"},{default:t(()=>[Ll]),_:1})])]),e(W,{class:"mt-3"},{default:t(()=>[e(A,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(G,{label:"Filter by reference",density:"compact",modelValue:F.value,"onUpdate:modelValue":l[4]||(l[4]=r=>F.value=r),variant:"outlined"},null,8,["modelValue"])]),_:1}),e(A,{cols:"12",sm:"6",md:"2"},{default:t(()=>[e(ye,{label:"Filter by status",density:"compact","persistent-placeholder":!0,placeholder:"Select",modelValue:a(_),"onUpdate:modelValue":l[5]||(l[5]=r=>U(_)?_.value=r:null),items:["Approved","Declined","Transferred","Pending"],variant:"outlined"},null,8,["modelValue"])]),_:1}),e(A,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(ye,{label:"Filter by trade type",density:"compact",placeholder:"Select",modelValue:x.value,"onUpdate:modelValue":l[6]||(l[6]=r=>x.value=r),items:["Buy","Sell"],variant:"outlined"},null,8,["modelValue"])]),_:1}),e(A,{cols:"12",sm:"6",md:"2"},{default:t(()=>[e(G,{label:"Filter by date created",density:"compact",modelValue:D.value,"onUpdate:modelValue":l[7]||(l[7]=r=>D.value=r),type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(A,{cols:"12",sm:"6",md:"2"},{default:t(()=>[e(G,{label:"Filter by date created",density:"compact",modelValue:I.value,"onUpdate:modelValue":l[8]||(l[8]=r=>I.value=r),type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(S,{class:"pa-5"},{default:t(()=>{var r,P;return[e(Ge,{modelValue:a(Z),"onUpdate:modelValue":l[14]||(l[14]=h=>U(Z)?Z.value=h:null),"bg-color":"none",class:"mb-5 border-bottom"},{default:t(()=>[e(L,{onClick:l[9]||(l[9]=h=>a(y)(_.value=""))},{default:t(()=>[Ml]),_:1}),e(L,{onClick:l[10]||(l[10]=h=>a(y)(_.value="pending"))},{default:t(()=>[ql]),_:1}),e(L,{onClick:l[11]||(l[11]=h=>a(y)(_.value="approved"))},{default:t(()=>[zl]),_:1}),e(L,{onClick:l[12]||(l[12]=h=>a(y)(_.value="declined"))},{default:t(()=>[Yl]),_:1}),e(L,{onClick:l[13]||(l[13]=h=>a(y)(_.value="partial"))},{default:t(()=>[Ol]),_:1})]),_:1},8,["modelValue"]),e(Je,null,{default:t(()=>{var h,E,ce;return[s("thead",null,[s("tr",null,[(u(!0),c(J,null,se(Te.value,(o,le)=>(u(),c("th",{key:le,class:"text-left"},p(o.title),1))),128))])]),((E=(h=a(q))==null?void 0:h.data)==null?void 0:E.length)>0&&a(z)==!1?(u(),c("tbody",Hl,[(u(!0),c(J,null,se((ce=a(q))==null?void 0:ce.data,(o,le)=>{var pe,_e,ve;return u(),c("tr",{key:o.id},[s("td",null,p(le+1),1),s("td",Wl,p((_e=(pe=o.user)==null?void 0:pe.firstname)!=null?_e:"No name")+" "+p((ve=o.user)==null?void 0:ve.lastname),1),s("td",null,p(o.reference),1),s("td",null,"\u20A6\u200E"+p(o.payable_amount.toLocaleString()),1),s("td",null,p(a(cl)(o==null?void 0:o.created_at,"DD, MMMM-YYYY hh:mm a").value),1),s("td",null,p(o.trade_type),1),s("td",null,[e(sl,{label:"",class:"text-capitalize font-weight-bold pa-3",color:Fe(o==null?void 0:o.status)},{default:t(()=>[i(p(o==null?void 0:o.status),1)]),_:2},1032,["color"])]),s("td",null,[e(W,{justify:"center"},{default:t(()=>[e(ol,{transition:"scroll-y-transition"},{activator:t(({props:O})=>[e(C,nl({text:"",icon:"mdi-dots-vertical",color:"transparent",class:"ma-2"},O),null,16)]),default:t(()=>[e(rl,null,{default:t(()=>[e(K,{to:{name:"ViewAssetsTransaction",params:{id:o==null?void 0:o.id}},link:"",color:"secondary"},{default:t(()=>[e(Q,null,{default:t(()=>[Gl]),_:1})]),_:2},1032,["to"]),(o==null?void 0:o.status)=="transferred"?(u(),R(K,{key:0,onClick:O=>ee("approve",o==null?void 0:o.id),link:"",color:"secondary"},{default:t(()=>[e(Q,null,{default:t(()=>[Jl]),_:1})]),_:2},1032,["onClick"])):f("",!0),(o==null?void 0:o.status)=="transferred"?(u(),R(K,{key:1,onClick:O=>(j.value=!0,U(g)?g.value=o==null?void 0:o.id:g=o==null?void 0:o.id),link:"",color:"secondary"},{default:t(()=>[e(Q,null,{default:t(()=>[Kl]),_:1})]),_:2},1032,["onClick"])):f("",!0),(o==null?void 0:o.status)=="transferred"?(u(),R(K,{key:2,onClick:O=>(N.value=!0,U(g)?g.value=o==null?void 0:o.id:g=o==null?void 0:o.id),link:"",color:"secondary"},{default:t(()=>[e(Q,null,{default:t(()=>[Ql]),_:1})]),_:2},1032,["onClick"])):f("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])])}),128))])):f("",!0)]}),_:1}),((P=(r=a(q))==null?void 0:r.data)==null?void 0:P.length)<=0&&a(z)==!1?(u(),c("p",Xl," No data found ")):f("",!0),a(z)==!0?(u(),R(Qe,{key:1,class:"align-center justify-center w-100 my-5"},{default:t(()=>[e(Ke,{indeterminate:""})]),_:1})):f("",!0)]}),_:1}),e(Xe,{modelValue:a(V),"onUpdate:modelValue":[l[15]||(l[15]=r=>U(V)?V.value=r:null),l[18]||(l[18]=r=>a(y)(a(_),a(V),x.value))],length:(B=a(q))==null?void 0:B.last_page,onNext:l[16]||(l[16]=r=>a(y)(a(_),a(V),x.value)),onPrev:l[17]||(l[17]=r=>a(y)(a(_),a(V),x.value)),"active-color":"red",start:1,variant:"flat",class:"mt-5",color:"bg-secondary",rounded:"circle"},null,8,["modelValue","length"])]}),_:1}),a(N)?(u(),R(ae,{key:0,modelValue:a(N),"onUpdate:modelValue":l[21]||(l[21]=n=>U(N)?N.value=n:null),"max-width":"500px",width:"100%"},{default:t(()=>[e(S,{"max-width":"500px"},{default:t(()=>[e(me,null,{default:t(()=>[Zl,et]),_:1}),e(Ze,{class:"mt-7"},{default:t(()=>[e(ge,{label:"Comments",modelValue:ue.value,"onUpdate:modelValue":l[19]||(l[19]=n=>ue.value=n),variant:"outlined"},null,8,["modelValue"]),e(el,{onChange:Se,hint:"Optional","persistent-hint":"",label:"Review proof","append-inner-icon":"mdi-paperclip","prepend-icon":""}),e(C,{color:"secondary",class:"my-5",block:"",loading:d.declining,onClick:l[20]||(l[20]=n=>ee("decline",a(g)))},{default:t(()=>[lt]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):f("",!0),e(ae,{modelValue:a(j),"onUpdate:modelValue":l[27]||(l[27]=n=>U(j)?j.value=n:null),"max-width":"429px","min-height":"476px"},{default:t(()=>[e(S,{class:"view-dialog pa-4"},{default:t(()=>[s("div",tt,[at,e(C,{onClick:l[22]||(l[22]=n=>j.value=!1),icon:"mdi-close",color:"secondary",variant:"text"},{default:t(()=>[e(ll,{icon:"mdi-close"})]),_:1})]),e(tl,{class:"my-10"},{default:t(()=>[e(G,{prefix:"\u20A6\u200E",modelValue:T.review_amount,"onUpdate:modelValue":l[23]||(l[23]=n=>T.review_amount=n),type:"number",variant:"outlined",label:"Amount"},null,8,["modelValue"]),e(ge,{modelValue:T.review_note,"onUpdate:modelValue":l[24]||(l[24]=n=>T.review_note=n),variant:"outlined",label:"Review Note"},null,8,["modelValue"]),st,$.value.length?f("",!0):(u(),c("label",ot,rt)),s("input",{type:"file",multiple:"",id:"proof",ref:"fileInput",style:{display:"none"},accept:"image/*",onChange:l[25]||(l[25]=n=>Ae(n.target.files))},null,544),s("div",dt,[(u(!0),c(J,null,se($.value,(n,B)=>(u(),c("div",{key:B},[s("div",ut,[s("img",{class:"w-full cursor-pointer",style:{height:"75px","object-fit":"cover",width:"100%"},src:n},null,8,it),s("img",{src:Ne,class:"absolute rounded-full border border-red-700 -top-2 -right-2 bg-red-200 text-red-500 cursor-pointer",style:{position:"absolute",right:"-5px",top:"-5px"},width:"20",onClick:r=>Ce(n,B)},null,8,ct)])]))),128))]),a(oe)?(u(),c("div",pt,[s("small",_t,"Uploaded "+p(a(X))+" of "+p(a(ne))+"...",1)])):f("",!0),$.value.length?(u(),c("label",vt,yt)):f("",!0),e(C,{loading:a(z),onClick:l[26]||(l[26]=n=>ee("partial",a(g))),block:"",class:"mt-5",color:"secondary"},{default:t(()=>[gt]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}});var Nt=il(ht,[["__scopeId","data-v-0dcab0b0"]]);export{Nt as default};
