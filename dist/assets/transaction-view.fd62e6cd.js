import{u as Oe,_ as We,a as qe,b as Ge}from"./uploadImage.cddb4d11.js";import{a as Qe,s as Je,r as v,am as Ke,h as Xe,B as _e,A as Ze,o as _,c as p,b as s,w as o,a2 as x,af as me,aB as pe,a1 as I,m as r,t as l,a8 as fe,I as he,D as R,a9 as Z,ai as ve,a6 as O,aC as T,ax as et,e as a,F as W,k as ee,u as e,a7 as q,aD as ge,aE as be,aF as B,aP as tt,M as we,j as N,x as y,au as te,P as ye,T as at,aA as ke,ar as st,as as ot,H as lt,aG as nt,aQ as it,a3 as rt,a4 as dt}from"./index.09a9e36e.js";import{N as xe}from"./vue-easy-lightbox.esm.min.9ad09db9.js";import{u as Ve}from"./asset.ef81bb47.js";import{u as ut}from"./useFormatter.be1a3376.js";import{_ as ct}from"./plugin-vue_export-helper.21dcd24c.js";import{u as ae}from"./index.11c402df.js";const c=z=>(rt("data-v-577ff137"),z=z(),dt(),z),_t=r(" Confirm "),mt=r("Cancel"),pt=r("Yes"),ft=r(" Asset Transactions "),ht=r(" View Asset transaction "),vt={class:"pa-2"},gt={key:0},bt={key:1},wt=r("Asset Transaction Information"),yt=c(()=>a("span",{class:"mr-1"},"Reference:",-1)),kt={class:"mb-5"},xt={class:"mb-4"},Vt=c(()=>a("strong",null,"Comment:",-1)),Ct={class:"font-weight-normal mb-4"},At=c(()=>a("strong",null,"Payable Amount:",-1)),Dt={class:"font-weight-normal mb-4"},It=c(()=>a("strong",null,"Amount in USD:",-1)),Rt={key:0},Tt={key:1},Nt={class:"font-weight-normal mb-4"},St=c(()=>a("strong",null,"Asset Value:",-1)),Ut={class:"font-weight-normal mb-4"},Mt=c(()=>a("strong",null,"Service Charge:",-1)),Yt={key:0},$t={key:1},Ft={class:"font-weight-normal mb-4"},Bt=c(()=>a("strong",null,"USD Rate:",-1)),Pt={key:0},Et={key:1},jt={class:"font-weight-normal mb-4"},zt=c(()=>a("strong",null,"Date Created:",-1)),Lt={class:"font-weight-normal mb-4"},Ht=c(()=>a("strong",null,"Last Updated: ",-1)),Ot={key:0},Wt={key:1},qt=r(" Approve "),Gt=r(" Decline "),Qt=r("Review Information"),Jt={class:"font-weight-normal mb-4"},Kt=c(()=>a("strong",null,"Review Note: ",-1)),Xt={class:"font-weight-normal mb-5"},Zt=c(()=>a("strong",null,"Review By:",-1)),ea={class:"my-1"},ta=r("Email: "),aa={class:"font-weight-bold"},sa=r("Full name: "),oa={class:"font-weight-bold"},la={class:"font-weight-normal"},na=c(()=>a("strong",null,"Review At: ",-1)),ia={key:0},ra=r("User Information"),da={class:"font-weight-normal mb-4"},ua=c(()=>a("strong",null,"First name:",-1)),ca={class:"font-weight-normal mb-4"},_a=c(()=>a("strong",null,"Last name:",-1)),ma={class:"font-weight-normal mb-4"},pa=c(()=>a("strong",null,"Email:",-1)),fa={class:"font-weight-normal mb-4"},ha=c(()=>a("strong",null,"Phone number:",-1)),va=r("Bank Information"),ga={class:"font-weight-normal mb-4"},ba=c(()=>a("strong",null,"Bank name:",-1)),wa={class:"font-weight-normal mb-4"},ya=c(()=>a("strong",null,"Account name:",-1)),ka={class:"font-weight-normal mb-4"},xa=c(()=>a("strong",null,"Account number:",-1)),Va=r("Wallet Information"),Ca={class:"font-weight-normal mb-4"},Aa=c(()=>a("strong",null,"Wallet Address:",-1)),Da=r("Other Information"),Ia={class:"font-weight-normal mb-4"},Ra=c(()=>a("strong",null,"Network name: ",-1)),Ta=c(()=>a("strong",{class:"mb-4"},"Proof Image:",-1)),Na=c(()=>a("h3",null,"Decline Transaction",-1)),Sa=c(()=>a("p",null,"Enter Reasons for Declining this asset transaction",-1)),Ua=r("Submit"),Ma={class:"mb-3 d-flex justify-space-between"},Ya=c(()=>a("h3",{class:"text-justify mt-7"},"Partial approval",-1)),$a=c(()=>a("label",{for:"proof",class:"cursor-pointer"},[a("p",{class:"text-black"},"Upload transaction proof")],-1)),Fa={key:0,for:"proof",class:"cursor-pointer"},Ba=c(()=>a("img",{src:qe,alt:"card-placeholder",class:"mt-3 w-full object-fill max-h-[174px] rounded-xl"},null,-1)),Pa=[Ba],Ea={class:"gap-5 mt-5",style:{display:"grid","grid-template-columns":"repeat(4, 80px)",gap:"12px"}},ja={style:{position:"relative"}},za=["src"],La=["onClick"],Ha={key:1,class:"pt-3 text-center"},Oa={class:"p-2 block"},Wa={key:2,for:"proof",class:"mt-4 d-flex align-center cursor-pointer"},qa=c(()=>a("img",{src:Ge,alt:"plus icon"},null,-1)),Ga=c(()=>a("p",{class:"ml-3 underline"},"Add more proof",-1)),Qa=[qa,Ga],Ja=r("submit"),Ka=Qe({__name:"transaction-view",setup(z){const{formatCurrency:L,formatNumber:k}=ut(),{getSingleAssetTransactions:se,approveAssetTransactions:Ce,declineAssetTransactions:Ae,partialApproveRequest:De,getUSDRate:Ie}=Ve(),{dialog:P,loading:G,single_transactions:t,dialog2:$,usd_rate:S}=Je(Ve()),Re=v([{title:"Asset"},{title:"Network"},{title:"Type"},{title:"Rate"},{title:"Asset value"},{title:"Payable Amount"},{title:"Amount in USD"}]);let oe=v(!1),Q=v(1),le=v(1);const ne=nt(),Te=it(),Ne=d=>{Te.push({name:"UserDetails",params:{id:d}})},ie=v("");v("");const Se=d=>d=="pending"?"yellow-darken-3":d=="approved"?"green lighten-3":d=="declined"?"red lighten-3":"",Ue=d=>d==="buy"?"green lighten-3":d==="sell"?"red lighten-3":"",Me=v(""),Ye=d=>{Me.value=d.target.files[0]},U=Ke({review_amount:"",review_note:"",review_proof:[]}),F=v([]),$e=(d,i)=>{F.value=F.value.filter(n=>n!==d),U.review_proof.splice(i,1)},Fe=d=>{oe.value=!0;let i=d.length,n=0;if(event){for(le.value=d.length;i--;)Oe(d[n]).then(m=>{Q.value++,F.value.push(m.secure_url),U.review_proof.push(m.secure_url)}),n++;Q.value=0}};Xe(async()=>{await se(ne.params.id),Ie(),console.log(S)});const J=v(!1),K=v(!1),Be=()=>{K.value=!0},Pe=()=>{J.value=!0},Ee=v(0),je=v(0),re=()=>(K.value=!1,J.value=!1),ze=_e(()=>{var d;return Array((d=t==null?void 0:t.value)==null?void 0:d.proof)}),Le=_e(()=>{var d;return Array((d=t==null?void 0:t.value)==null?void 0:d.review_proof)}),de=async()=>{await se(ne.params.id)},C=v(!1);let V=v("");const H=v(""),X=(d,i)=>{C.value=!0,V.value=i,H.value=d},He=async d=>{d=="approve"?(await Ce(V.value),de(),C.value=!1):d=="decline"?(Ae(V.value),C.value=!1):d=="partial"&&(De(V.value,U),C.value=!1),C.value=!1};return Ze([P,$],([d,i],[n,m])=>{d===!1&&i===!1&&de()}),(d,i)=>(_(),p(W,null,[s(Z,{modelValue:C.value,"onUpdate:modelValue":i[2]||(i[2]=n=>C.value=n),width:"500"},{default:o(()=>[s(x,null,{default:o(()=>[s(me,{dark:"",dense:"",flat:""},{default:o(()=>[s(pe,{class:"text-body-2 font-weight-bold grey--text"},{default:o(()=>[_t]),_:1})]),_:1}),s(I,{class:"pa-4 black--text"},{default:o(()=>[r("Are you sure you want to "+l(H.value==="partial"?"partially approve":H.value)+" this transaction?",1)]),_:1}),s(fe,{class:"pt-3"},{default:o(()=>[s(he),s(R,{color:"grey",text:"",class:"body-2 font-weight-bold",onClick:i[0]||(i[0]=n=>C.value=!1)},{default:o(()=>[mt]),_:1}),s(R,{color:"primary",class:"body-2 font-weight-bold",outlined:"",onClick:i[1]||(i[1]=n=>He(H.value))},{default:o(()=>[pt]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(q,null,{default:o(()=>[s(R,{class:"ml-4",link:"",size:"large",variant:"plain",color:"grey-darken-4",to:{name:"AssetsTransaction"}},{default:o(()=>[s(ve,{start:"",icon:"mdi-arrow-left"}),ft]),_:1}),s(O,{cols:"12",sm:"12",lg:"12"},{default:o(()=>[s(x,{rounded:"0",class:"pa-4"},{default:o(()=>[s(me,{color:"transparent"},{default:o(()=>[s(pe,{class:"font-weight-medium"},{default:o(()=>[ht]),_:1}),s(he)]),_:1}),s(T),s(et,{class:"ksb-border my-10"},{default:o(()=>{var n,m,u,f,h,g,w,b,A,D;return[a("thead",null,[a("tr",vt,[(_(!0),p(W,null,ee(Re.value,(M,Y)=>(_(),p("th",{key:Y,class:"text-left"},l(M.title),1))),128))])]),a("tbody",null,[a("tr",null,[a("td",null,l((m=(n=e(t))==null?void 0:n.asset)==null?void 0:m.code),1),a("td",null,l((f=(u=e(t))==null?void 0:u.network)==null?void 0:f.name),1),a("td",null,l((h=e(t))==null?void 0:h.trade_type),1),a("td",null,"$"+l(e(k)((g=e(t))==null?void 0:g.rate)),1),a("td",null,[r(l((b=(w=e(t))==null?void 0:w.asset)==null?void 0:b.code)+" ",1),a("strong",null,l(e(t).asset_amount),1)]),a("td",null,l(e(L)(((A=e(t))==null?void 0:A.payable_amount)*e(S).sell_rate)),1),a("td",null,[((D=e(t))==null?void 0:D.trade_type)=="sell"?(_(),p("span",gt," $"+l(e(k)(e(t).payable_amount+e(t).service_charge)),1)):(_(),p("span",bt," $"+l(e(k)(e(t).payable_amount)),1))])])])]}),_:1}),s(q,{class:"px-4"},{default:o(()=>[s(O,{cols:"12",sm:"12",lg:"6"},{default:o(()=>[s(x,{loading:e(G),class:"mx-auto my-12"},{loader:o(({isActive:n})=>[s(ge,{active:n,color:"deep-purple",height:"4",indeterminate:""},null,8,["active"])]),default:o(()=>[s(be,{class:"pa-0 mb-5"},{default:o(()=>[s(B,{class:"pa-4"},{default:o(()=>[wt]),_:1}),s(T),s(tt,{class:"ml-6 my-2"},{default:o(()=>[yt,a("span",null,l(e(t).reference),1)]),_:1})]),_:1}),s(I,null,{default:o(()=>{var n,m,u,f,h,g,w,b,A,D,M,Y;return[s(q,{align:"center",class:"mx-0 mb-3"},{default:o(()=>{var E,ue;return[s(we,{label:"",size:"small",density:"comfortable",class:"text-capitalize font-weight-bold pa-3 mr-4",color:Se((E=e(t))==null?void 0:E.status)},{default:o(()=>{var j,ce;return[r(l(((j=e(t))==null?void 0:j.status)=="partially_approved"?"Approved":(ce=e(t))==null?void 0:ce.status),1)]}),_:1},8,["color"]),s(we,{label:"",size:"small",density:"comfortable",class:"text-capitalize font-weight-bold pa-3",color:Ue((ue=e(t))==null?void 0:ue.trade_type)},{default:o(()=>{var j;return[r(l((j=e(t))==null?void 0:j.trade_type),1)]}),_:1},8,["color"])]}),_:1}),a("div",kt,[a("strong",null,"Asset "+l((n=e(t))==null?void 0:n.trade_type)+" rate:",1),r(" $"+l(e(k)((m=e(t))==null?void 0:m.rate)),1)]),a("div",xt,[Vt,r(" "+l((u=e(t))==null?void 0:u.comment),1)]),a("div",Ct,[At,r(" "+l(e(L)(e(t).payable_amount*e(S).sell_rate)),1)]),a("div",Dt,[It,((f=e(t))==null?void 0:f.trade_type)=="sell"?(_(),p("span",Rt," $"+l(e(k)(e(t).payable_amount+e(t).service_charge)),1)):(_(),p("span",Tt," $"+l(e(k)(e(t).payable_amount-e(t).service_charge)),1))]),a("div",Nt,[St,r(" "+l((g=(h=e(t))==null?void 0:h.asset)==null?void 0:g.code)+" ",1),a("strong",null,l(e(t).asset_amount),1)]),a("div",Ut,[Mt,((w=e(t))==null?void 0:w.trade_type)=="sell"?(_(),p("span",Yt," - "+l(e(L)(e(t).service_charge/100*e(t).asset_amount*e(t).rate*e(S).sell_rate))+" ("+l(e(k)(e(t).service_charge/100*e(t).asset_amount*e(t).rate))+"%) ",1)):(_(),p("span",$t," + "+l(e(L)(e(t).service_charge/100*e(t).asset_amount*e(t).rate*e(S).buy_rate))+" ("+l(e(k)(e(t).service_charge/100*e(t).asset_amount*e(t).rate))+"%) ",1))]),a("div",Ft,[Bt,((b=e(t))==null?void 0:b.trade_type)=="sell"?(_(),p("span",Pt,l(e(k)(e(S).sell_rate)),1)):(_(),p("span",Et,l(e(k)(e(S).buy_rate)),1))]),a("div",jt,[zt,r(" "+l(e(ae)((A=e(t))==null?void 0:A.created_at,"DD, MMMM-YYYY hh:mm a").value),1)]),a("div",Lt,[Ht,((D=e(t))==null?void 0:D.status)=="approved"||((M=e(t))==null?void 0:M.status)=="declined"?(_(),p("span",Ot,l(e(ae)((Y=e(t))==null?void 0:Y.updated_at,"DD, MMMM-YYYY hh:mm a").value),1)):(_(),p("span",Wt," No data "))])]}),_:1}),e(t).status==="transferred"?(_(),N(T,{key:0,class:"mx-4 mb-1"})):y("",!0),e(t).status==="transferred"||e(t).status==="pending"?(_(),N(fe,{key:1},{default:o(()=>[s(R,{class:"mr-4",color:"green lighten-3",loading:d.approving,variant:"tonal",onClick:i[3]||(i[3]=n=>{var m;return X("approve",(m=e(t))==null?void 0:m.id)})},{default:o(()=>[qt]),_:1},8,["loading"]),s(R,{color:"red lighten-3",variant:"tonal",onClick:i[4]||(i[4]=n=>{var m,u;return $.value=!0,te(V)?V.value=(m=e(t))==null?void 0:m.id:V=(u=e(t))==null?void 0:u.id})},{default:o(()=>[Gt]),_:1})]),_:1})):y("",!0)]),_:1},8,["loading"]),s(x,null,{default:o(()=>{var n,m;return[s(B,null,{default:o(()=>[Qt]),_:1}),s(T),s(I,null,{default:o(()=>{var u,f,h,g,w,b,A,D,M,Y,E;return[a("div",Jt,[Kt,r(" "+l((f=(u=e(t))==null?void 0:u.review_note)!=null?f:"No data"),1)]),a("div",Xt,[Zt,a("p",ea,[ta,a("span",aa,l((w=(g=(h=e(t))==null?void 0:h.reviewer)==null?void 0:g.email)!=null?w:"No data"),1)]),a("p",null,[sa,a("span",oa,l((A=(b=e(t))==null?void 0:b.reviewer)==null?void 0:A.firstname)+" "+l((M=(D=e(t))==null?void 0:D.reviewer)==null?void 0:M.lastname),1)])]),a("div",la,[na,e(t).reviewed_at?(_(),p("span",ia,l((E=e(ae)((Y=e(t))==null?void 0:Y.reviewed_at,"DD, MMMM-YYYY hh:mm a").value)!=null?E:"No data"),1)):y("",!0)])]}),_:1}),((m=(n=e(t))==null?void 0:n.review_proof)==null?void 0:m.length)>0?(_(),N(q,{key:0},{default:o(()=>{var u;return[(_(!0),p(W,null,ee((u=e(t))==null?void 0:u.review_proof,(f,h)=>(_(),N(O,{key:h,cols:"12",sm:"6",md:"4",lg:"3"},{default:o(()=>[s(ye,{cover:"",width:"100",height:"100",onClick:Pe,src:f,class:"cursor-pointer mt-4"},null,8,["src"])]),_:2},1024))),128))]}),_:1})):y("",!0)]}),_:1})]),_:1}),s(O,{cols:"12",sm:"12",lg:"6"},{default:o(()=>{var n,m;return[s(x,{loading:e(G),class:"mx-auto my-12"},{loader:o(({isActive:u})=>[s(ge,{active:u,color:"deep-purple",height:"4",indeterminate:""},null,8,["active"])]),default:o(()=>[s(be,null,{default:o(()=>[s(B,null,{default:o(()=>[ra]),_:1})]),_:1}),s(T),s(I,null,{default:o(()=>{var u,f,h,g;return[a("div",da,[ua,r(" "+l((u=e(t).user)==null?void 0:u.firstname),1)]),a("div",ca,[_a,r(" "+l((f=e(t).user)==null?void 0:f.lastname),1)]),a("div",ma,[pa,a("span",{onClick:i[5]||(i[5]=w=>{var b;return Ne((b=e(t).user)==null?void 0:b.id)}),class:"text-underline ml-3"},l((h=e(t).user)==null?void 0:h.email),1)]),a("div",fa,[ha,r(" "+l((g=e(t).user)==null?void 0:g.phone_number),1)])]}),_:1})]),_:1},8,["loading"]),((n=e(t))==null?void 0:n.trade_type)=="sell"?(_(),N(x,{key:0},{default:o(()=>[s(B,null,{default:o(()=>[va]),_:1}),s(T),s(I,null,{default:o(()=>{var u,f,h,g,w,b;return[a("div",ga,[ba,r(" "+l((f=(u=e(t).bank)==null?void 0:u.name)!=null?f:" No bank"),1)]),a("div",wa,[ya,r(" "+l((g=(h=e(t))==null?void 0:h.account_name)!=null?g:" No account name"),1)]),a("div",ka,[xa,r(" "+l((b=(w=e(t))==null?void 0:w.account_number)!=null?b:" No account number"),1)])]}),_:1})]),_:1})):y("",!0),((m=e(t))==null?void 0:m.trade_type)=="buy"?(_(),N(x,{key:1},{default:o(()=>[s(B,null,{default:o(()=>[Va]),_:1}),s(T),s(I,null,{default:o(()=>{var u;return[a("div",Ca,[Aa,r(" "+l((u=e(t).wallet_address)!=null?u:" No Address"),1)])]}),_:1})]),_:1})):y("",!0),s(x,{class:"my-12"},{default:o(()=>[s(B,null,{default:o(()=>[Da]),_:1}),s(T),s(I,null,{default:o(()=>{var u,f,h;return[a("div",Ia,[Ra,r(" "+l((u=e(t).network)==null?void 0:u.name),1)]),Ta,(f=e(t))!=null&&f.proof?(_(),N(ye,{key:0,cover:"",width:"100",height:"100",onClick:Be,src:(h=e(t))==null?void 0:h.proof,class:"cursor-pointer mt-4"},null,8,["src"])):y("",!0)]}),_:1})]),_:1})]}),_:1})]),_:1})]),_:1})]),_:1}),s(e(xe),{visible:K.value,imgs:e(ze),index:Ee.value,onHide:re},null,8,["visible","imgs","index"]),s(e(xe),{visible:J.value,imgs:e(Le),index:je.value,onHide:re},null,8,["visible","imgs","index"]),e($)?(_(),N(Z,{key:0,modelValue:e($),"onUpdate:modelValue":i[8]||(i[8]=n=>te($)?$.value=n:null),"max-width":"500px",width:"100%"},{default:o(()=>[s(x,{"max-width":"500px"},{default:o(()=>[s(I,null,{default:o(()=>[Na,Sa]),_:1}),s(at,{class:"mt-7"},{default:o(()=>[s(ke,{label:"Comments",modelValue:ie.value,"onUpdate:modelValue":i[6]||(i[6]=n=>ie.value=n),variant:"outlined"},null,8,["modelValue"]),s(st,{onChange:Ye,hint:"Optional","persistent-hint":"",label:"Review proof","append-inner-icon":"mdi-paperclip","prepend-icon":""}),s(R,{color:"secondary",class:"my-5",block:"",loading:d.declining,onClick:i[7]||(i[7]=n=>X("decline",e(V)))},{default:o(()=>[Ua]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):y("",!0),s(Z,{modelValue:e(P),"onUpdate:modelValue":i[14]||(i[14]=n=>te(P)?P.value=n:null),"max-width":"429px","min-height":"476px"},{default:o(()=>[s(x,{class:"view-dialog pa-4"},{default:o(()=>[a("div",Ma,[Ya,s(R,{onClick:i[9]||(i[9]=n=>P.value=!1),icon:"mdi-close",color:"secondary",variant:"text"},{default:o(()=>[s(ve,{icon:"mdi-close"})]),_:1})]),s(ot,{class:"my-10"},{default:o(()=>[s(lt,{prefix:"\u20A6\u200E",modelValue:U.review_amount,"onUpdate:modelValue":i[10]||(i[10]=n=>U.review_amount=n),type:"number",variant:"outlined",label:"Amount"},null,8,["modelValue"]),s(ke,{modelValue:U.review_note,"onUpdate:modelValue":i[11]||(i[11]=n=>U.review_note=n),variant:"outlined",label:"Review Note"},null,8,["modelValue"]),$a,F.value.length?y("",!0):(_(),p("label",Fa,Pa)),a("input",{type:"file",multiple:"",id:"proof",ref:"fileInput",style:{display:"none"},accept:"image/*",onChange:i[12]||(i[12]=n=>Fe(n.target.files))},null,544),a("div",Ea,[(_(!0),p(W,null,ee(F.value,(n,m)=>(_(),p("div",{key:m},[a("div",ja,[a("img",{class:"w-full cursor-pointer",style:{height:"75px","object-fit":"cover",width:"100%"},src:n},null,8,za),a("img",{src:We,class:"absolute rounded-full border border-red-700 -top-2 -right-2 bg-red-200 text-red-500 cursor-pointer",style:{position:"absolute",right:"-5px",top:"-5px"},width:"20",onClick:u=>$e(n,m)},null,8,La)])]))),128))]),e(oe)?(_(),p("div",Ha,[a("small",Oa,"Uploaded "+l(e(Q))+" of "+l(e(le))+"...",1)])):y("",!0),F.value.length?(_(),p("label",Wa,Qa)):y("",!0),s(R,{loading:e(G),onClick:i[13]||(i[13]=n=>X("partial",e(V))),block:"",class:"mt-5",color:"secondary"},{default:o(()=>[Ja]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64))}});var ls=ct(Ka,[["__scopeId","data-v-577ff137"]]);export{ls as default};
