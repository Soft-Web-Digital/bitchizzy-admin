import{d,f as o,Y as e,ab as p,ac as i,a0 as c}from"./index.d08b3963.js";const h=d("withdrawals",{state:()=>({withdrawal:{},loading:!1,disapproving:!1,approving:!1,singleWithdrawal:{},dialog:!1,transactions:{}}),getters:{withdrawals:n=>n.withdrawal,withdrawals_total:n=>{var a,s;return(s=(a=n.transactions)==null?void 0:a.wallet_transactions)==null?void 0:s.map(t=>({total_completed_transactions_amount:t.total_completed_transactions_amount,total_completed_transactions_count:t.total_completed_transactions_count,total_declined_transactions_count:t.total_declined_transactions_count,total_pending_transactions_count:t.total_pending_transactions_count}))},giftcard_total:n=>{var a,s;return(s=(a=n.transactions)==null?void 0:a.giftcards)==null?void 0:s.map(t=>({total_approved_transactions_amount:t.total_approved_transactions_amount,total_approved_transactions_count:t.total_approved_transactions_count,total_declined_transactions_count:t.total_declined_transactions_count,total_pending_transactions_count:t.total_pending_transactions_count,total_partially_approved_transactions_count:t.total_partially_approved_transactions_count}))},asset_total:n=>{var a,s;return(s=(a=n.transactions)==null?void 0:a.asset_transactions)==null?void 0:s.map(t=>({total_approved_transactions_amount:t.total_approved_transactions_amount,total_approved_transactions_count:t.total_approved_transactions_count,total_declined_transactions_count:t.total_declined_transactions_count,total_pending_transactions_count:t.total_pending_transactions_count,total_partially_approved_transactions_count:t.total_partially_approved_transactions_count}))}},actions:{async getAllTransactionCount(){const n=o();this.loading=!0;try{await e.get(p,{headers:{Accept:"application/json",Authorization:`Bearer ${n.token}`}}).then(a=>{this.loading=!1,this.transactions=a.data.data})}catch{this.loading=!1}},async getAllWithDrawals(n,a){const s=o();this.loading=!0;try{await e.get(i+"?include=user&page="+a+"&filter[status]="+n+"&per_page=100",{headers:{Accept:"application/json",Authorization:`Bearer ${s.token}`}}).then(t=>{this.loading=!1,this.withdrawal=t.data.data.wallet_transactions})}catch{this.loading=!1}},async getAllWithDrawalsByUserID(n){const a=o();this.loading=!0;try{await e.get(i+"?include=user&filter[user_id]="+n,{headers:{Accept:"application/json",Authorization:`Bearer ${a.token}`}}).then(s=>{this.loading=!1,this.withdrawal=s.data.data.wallet_transactions})}catch{this.loading=!1}},async filterWithDrawalsByDateCreated(n){const a=o(),{notify:s}=c();this.loading=!0;try{await e.get(i+"?sort="+n,{headers:{Accept:"application/json",Authorization:`Bearer ${a.token}`}}).then(t=>{this.loading=!1,s({title:"Successful",text:t.data.message,type:"success"}),this.withdrawal=t.data.data.wallet_transactions})}catch{this.loading=!1}},async getSingleWithDrawals(n){const a=o(),{notify:s}=c();try{await e.get(i+"/"+n,{headers:{Accept:"application/json",Authorization:`Bearer ${a.token}`}}).then(t=>{this.singleWithdrawal=t.data.data.wallet_transaction})}catch(t){this.loading=!1,s({title:"An Error Occurred",text:t.response.data.message,type:"error"})}},async approveRequest(n){const a=o(),{notify:s}=c();this.loading=!0;var t=new FormData;t.append("_method","PATCH");try{await e.post(i+"/"+n+"/approve",t,{headers:{Accept:"application/json",Authorization:`Bearer ${a.token}`}}).then(r=>{this.approving=!1,s({title:"Successful",text:r.data.message,type:"success"}),this.getAllWithDrawals("pending",1),this.dialog=!1})}catch(r){this.approving=!1,this.dialog=!1,s({title:"An Error Occurred",text:r.response.data.message,type:"error"})}},async declineRequest(n,a){const s=o(),{notify:t}=c();this.disapproving=!0;var r=new FormData;r.append("note",a);try{await e.patch(i+"/"+n+"/decline",r,{headers:{Accept:"application/json",Authorization:`Bearer ${s.token}`}}).then(l=>{this.disapproving=!1,this.dialog=!1,t({title:"Successful",text:l.data.message,type:"success"}),this.getAllWithDrawals("pending",1)})}catch(l){this.disapproving=!1,this.dialog=!1,t({title:"An Error Occurred",text:l.response.data.message,type:"error"})}}}});export{h as u};
