import{d as u,f as r,Y as i,aF as c,aD as g,aG as p,aH as f,a0 as l}from"./index.d08b3963.js";const A=u("asset",{state:()=>({loading:!1,dialog:!1,dialog2:!1,all_transactions:[],single_transactions:[],asset:{name:"",code:"",icon:"",buy_rate:"",sell_rate:"",id:"",networks:[],buy_min_amount:"",buy_max_amount:"",sell_min_amount:"",sell_max_amount:"",network_id:[]},assets:[],all_networks:[],asset_details:{},page:1,tab:null,status:""}),getters:{allTransactions:t=>t.all_transactions,getIds:t=>t.asset.networks.map(s=>s)},actions:{async getAllAssetTransactions(t="",s=1,e="",a="",o="",n=""){const d=r();this.loading=!0;try{await i.get(c+"?filter[status]="+t.toLowerCase()+"&filter[reference]="+a+"&page="+s+"&filter[trade_type]="+e.toLowerCase()+`&include=user&per_page=100&filter[creation_date]=${o}${o!==""?","+n:""}`,{headers:{Accept:"application/json",Authorization:`Bearer ${d.token}`}}).then(h=>{this.loading=!1,this.all_transactions=h.data.data.asset_transactions})}catch{this.loading=!1}},async getAllAssetTransactionsStatus(t,s){const e=r(),{notify:a}=l();this.loading=!0;try{await i.get(c+"?filter[status]="+t.toLowerCase()+"&page="+s,{headers:{Accept:"application/json",Authorization:`Bearer ${e.token}`}}).then(o=>{this.loading=!1,a({title:"Successful",text:o.data.message,type:"success"}),this.all_transactions=o.data.data.asset_transactions})}catch{this.loading=!1}},async getAllAssetTransactionByTradeType(t){const s=r(),{notify:e}=l();this.loading=!0;try{await i.get(c+"?filter[trade_type]="+t.toLowerCase()+"&include=asset",{headers:{Accept:"application/json",Authorization:`Bearer ${s.token}`}}).then(a=>{this.loading=!1,e({title:"Successful",text:a.data.message,type:"success"}),this.all_transactions=a.data.data.asset_transactions})}catch{this.loading=!1}},async getAllAssetTransactionByReference(t){const s=r(),{notify:e}=l();this.loading=!0;try{await i.get(c+"?filter[reference]="+t+"&include=asset",{headers:{Accept:"application/json",Authorization:`Bearer ${s.token}`}}).then(a=>{this.loading=!1,e({title:"Successful",text:a.data.message,type:"success"}),this.all_transactions=a.data.data.asset_transactions})}catch{this.loading=!1}},async getAllAssetTransactionByDate(t){const s=r(),{notify:e}=l();this.loading=!0;try{await i.get(c+"?filter[creation_date]="+t+"&include=asset",{headers:{Accept:"application/json",Authorization:`Bearer ${s.token}`}}).then(a=>{this.loading=!1,e({title:"Successful",text:a.data.message,type:"success"}),this.all_transactions=a.data.data.asset_transactions})}catch{this.loading=!1}},async getAllAssetTransactionsByUserId(t){const s=r();this.loading=!0;try{await i.get(c+"?filter[user_id]="+t+"&include=user",{headers:{Accept:"application/json",Authorization:`Bearer ${s.token}`}}).then(e=>{this.loading=!1,this.all_transactions=e.data.data.asset_transactions})}catch{this.loading=!1}},async filterAllAssetTransactionsByUserId(t,s=1){const e=r();this.loading=!0;try{await i.get(c+`?filter[user_id]=${t}&include=user&page=${s}&per_page=15`,{headers:{Accept:"application/json",Authorization:`Bearer ${e.token}`}}).then(a=>{this.loading=!1,this.all_transactions=a.data.data.asset_transactions})}catch{this.loading=!1}},async getSingleAssetTransactions(t,s=1){const e=r();this.loading=!0;try{await i.get(c+"/"+t+"?include=asset,user,bank,network,reviewer&page="+s,{headers:{Accept:"application/json",Authorization:`Bearer ${e.token}`}}).then(a=>{this.loading=!1,this.dialog=!1,this.single_transactions=a.data.data.asset_transaction})}catch{this.loading=!1}},async approveAssetTransactions(t){const s=r(),{notify:e}=l();this.loading=!0;var a=new FormData;a.append("_method","PATCH"),a.append("complete_approval","1");try{await i.post(c+"/"+t+"/approve",a,{headers:{Accept:"application/json",Authorization:`Bearer ${s.token}`}}).then(o=>{this.loading=!1,this.dialog=!1,this.getSingleAssetTransactions(t),e({title:"Approval Successful",text:o.data.message,type:"success"})})}catch(o){this.loading=!1,e({title:"An Error Occurred",text:o.response.data.message,type:"error"})}},async partialApproveRequest(t,s){const e=r();g();const{notify:a}=l();this.loading=!0;var o={review_note:s.review_note,review_proof:s.review_proof,review_amount:s.review_amount,complete_approval:"0",_method:"PATCH"};try{await i.post(c+"/"+t+"/approve",o,{headers:{Accept:"application/json",Authorization:`Bearer ${e.token}`}}).then(n=>{this.loading=!1,this.dialog=!1,a({title:"Approved Successfully",text:n.data.message,type:"success"}),this.getSingleAssetTransactions(t)})}catch(n){this.loading=!1,a({title:"An Error Occurred",text:n.response.data.message,type:"error"})}},async declineAssetTransactions(t){const s=r(),{notify:e}=l();this.loading=!0;var a=new FormData;a.append("_method","PATCH");try{await i.post(c+"/"+t+"/decline",a,{headers:{Accept:"application/json",Authorization:`Bearer ${s.token}`}}).then(o=>{this.loading=!1,this.dialog=!1,this.dialog2=!1,this.getSingleAssetTransactions(t),e({title:"Decline Successful",text:o.data.message,type:"success"})})}catch(o){this.loading=!1,e({title:"An Error Occurred",text:o.response.data.message,type:"error"})}},async getAllAsset(t=1,s="",e="",a){const o=r();this.loading=!0;let n="";a?n+=`&filter[trashed]=${a}`:n="";try{await i.get(p+"?include=networks,networksCount&per_page=100&page="+t+"&filter[name]="+s+"&filter[code]="+e+"&include=networks"+n,{headers:{Accept:"application/json",Authorization:`Bearer ${o.token}`}}).then(d=>{this.loading=!1,this.assets=d.data.data.assets})}catch{this.loading=!1}},async getSingleAsset(t){const s=r();this.loading=!0;try{await i.get(p+"/"+t+"?include=networks",{headers:{Accept:"application/json",Authorization:`Bearer ${s.token}`}}).then(e=>{this.loading=!1,this.asset_details=e.data.data.asset})}catch{this.loading=!1}},async createAssets(t){const s=r();var e=new FormData;this.loading=!0,e.append("name",t.name),e.append("code",t.code),e.append("icon",t.icon),e.append("buy_rate",t.buy_rate),e.append("sell_rate",t.sell_rate),e.append("buy_min_amount",t.buy_min_amount),e.append("buy_max_amount",t.buy_max_amount),e.append("sell_min_amount",t.sell_min_amount),e.append("sell_max_amount",t.sell_max_amount);const a=this.asset.networks;for(let n=0;n<a.length;n++)e.append("networks[]",a[n]);const{notify:o}=l();try{await i.post(p,e,{headers:{Accept:"application/json",Authorization:`Bearer ${s.token}`}}).then(n=>{this.loading=!1,o({title:"Successful",text:n.data.message,type:"success"}),this.getAllAsset(),this.dialog=!1})}catch(n){this.loading=!1;const{notify:d}=l();d({title:"An Error Occurred",text:n.response.data.message,type:"error"})}},async updateAssets(t){const s=r();var e=new FormData;this.loading=!0,e.append("name",t.name),e.append("code",t.code),e.append("icon",t.icon),e.append("buy_rate",t.buy_rate),e.append("sell_rate",t.sell_rate),e.append("buy_min_amount",t.buy_min_amount),e.append("buy_max_amount",t.buy_max_amount),e.append("sell_min_amount",t.sell_min_amount),e.append("sell_max_amount",t.sell_max_amount);const a=t.network_id;for(let n=0;n<a.length;n++)e.append("networks[]",a[n]);e.append("_method","PATCH");const{notify:o}=l();try{await i.post(p+"/"+t.id,e,{headers:{Accept:"application/json",Authorization:`Bearer ${s.token}`}}).then(n=>{this.loading=!1,o({title:"Successful",text:n.data.message,type:"success"}),this.getAllAsset(),this.dialog=!1})}catch(n){this.loading=!1;const{notify:d}=l();d({title:"An Error Occurred",text:n.response.data.message,type:"error"})}},async restoreAsset(t){const s=r(),{notify:e}=l();this.loading=!0;try{await i.patch(p+"/"+t+"/restore","",{headers:{Accept:"application/json",Authorization:`Bearer ${s.token}`}}).then(a=>{this.loading=!1,e({title:"Successful",text:a.data.message,type:"success"}),this.getAllAsset()})}catch(a){this.loading=!1,e({title:"An Error Occurred",text:a.response.data.message,type:"error"})}},async deleteAsset(t){const s=r(),{notify:e}=l();this.loading=!0;try{await i.delete(p+"/"+t,{headers:{Accept:"application/json",Authorization:`Bearer ${s.token}`}}).then(a=>{this.loading=!1,e({title:"Successful",text:a.data.message,type:"success"}),this.getAllAsset()})}catch(a){this.loading=!1,e({title:"An Error Occurred",text:a.response.data.message,type:"error"})}},async getAllNetworks(){const t=r();this.loading=!0;try{await i.get(f,{headers:{Accept:"application/json",Authorization:`Bearer ${t.token}`}}).then(s=>{this.loading=!1,this.all_networks=s.data.data.networks.data})}catch{this.loading=!1}}}});export{A as u};
