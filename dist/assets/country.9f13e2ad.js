import{d as g,Y as r,Z as d,f as s,_ as o,$ as l,a0 as h}from"./index.09a9e36e.js";const p=g({id:"country",state:()=>({country:[],countryMgt:[],currencies:[],giftCategories:[],dialog:!1,exchange_rate_to_ngn:"",buy_rate:"",sell_rate:"",loading:!1,all_country:{},page:1}),getters:{countryNames:t=>t.country.map(a=>a.name),countries:t=>t.country,giftCardCategories:t=>t.giftCategories.map(a=>({id:a.id,name:a.name}))},actions:{async getCountries(){try{await r.get(d+"?filter[giftcard_activated]="+1+"&do_not_paginate=1",{headers:{Accept:"application/json"}}).then(t=>{this.country=t.data.data.countries})}catch{}},async getCountryMgt(t=1,a="",e="",i=""){const n=s();this.loading=!0;try{await r.get(o+"?per_page="+150+"&page="+t+"&filter[name]="+a+"&filter[registration_activated]="+i+"&filter[giftcard_activated]="+e,{headers:{Accept:"application/json",Authorization:`Bearer ${n.token}`}}).then(c=>{this.countryMgt=c.data.data.countries,this.loading=!1})}catch{this.loading=!1}},async getAllCountry(t=1,a="",e="",i=""){s(),this.loading=!0;try{await r.get(l+"?do_not_paginate=1&page="+t+"&filter[name]="+a+"&filter[registration_activated]="+i+"&filter[giftcard_activated]="+e,{headers:{Accept:"application/json"}}).then(n=>{this.all_country=n.data.data.countries,this.loading=!1})}catch{this.loading=!1}},async registrationActivation(t){const a=s();this.loading=!0;try{await r.patch(o+"/"+t+"/registration","",{headers:{Accept:"application/json",Authorization:`Bearer ${a.token}`}}).then(e=>{this.getCountryMgt(1),this.loading=!1})}catch{this.loading=!1}},async giftcardActivation(t,a){const e=s();this.loading=!0;try{await r.patch(o+"/"+t+"/giftcard","",{headers:{Accept:"application/json",Authorization:`Bearer ${e.token}`}}).then(i=>{this.getCountryMgt(a),this.loading=!1})}catch{this.loading=!1}},async getCurrency(t=""){try{this.loading=!0,await r.get("/currencies?do_not_paginate="+1,{headers:{Accept:"application/json"}}).then(a=>{this.currencies=a.data.data.currencies,this.loading=!1})}catch{this.loading=!1}},async updateCurrency(t){try{const{notify:e}=h(),i=s();this.loading=!0;var a=new FormData;a.append("exchange_rate_to_ngn",this.exchange_rate_to_ngn),a.append("buy_rate",this.buy_rate),a.append("sell_rate",this.sell_rate),a.append("_method","PATCH"),await r.post("/admin/currencies/"+t,a,{headers:{Accept:"application/json",Authorization:`Bearer ${i.token}`}}).then(n=>{e({title:"Successful",text:n.data.message,type:"success"}),this.loading=!1,this.getCurrency(),this.dialog=!1})}catch{this.loading=!1}},async getProducts(){try{await r.get("/giftcard-categories?include=countries&do_not_paginate=1",{headers:{Accept:"application/json"}}).then(t=>{this.giftCategories=t.data.data.giftcard_categories})}catch{}}}});export{p as u};
