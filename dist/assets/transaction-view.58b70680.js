import{u as Pe,_ as ze,a as je,b as Ee}from"./uploadImage.fc51e473.js";import{a as Le,s as qe,r as f,ai as He,h as Oe,B as ie,A as Ge,o as p,c as b,b as o,w as l,a2 as y,ad as re,ay as de,a1 as D,m as i,t as r,a8 as ue,I as ce,D as V,a9 as K,ag as _e,a6 as z,az as T,at as Je,e,F as j,k as Q,u as t,a7 as E,aA as me,aB as pe,aC as U,aM as Ke,M as fe,j as Y,x,aq as L,P as ve,T as Qe,aw as he,an as We,ao as Xe,H as Ze,aD as et,aN as tt,a3 as ot,a4 as at}from"./index.768fb5ed.js";import{N as ge}from"./vue-easy-lightbox.esm.min.d54ae765.js";import{u as we}from"./asset.70a8f82c.js";import{u as lt}from"./useFormatter.be1a3376.js";import{_ as st}from"./plugin-vue_export-helper.21dcd24c.js";import{u as W}from"./index.bb23e1de.js";const c=F=>(ot("data-v-78623fd3"),F=F(),at(),F),nt=i(" Confirm "),it=i("Cancel"),rt=i("Yes"),dt=i(" Asset Transactions "),ut=i(" View Asset transaction "),ct={class:"pa-2"},_t=i("Asset Transaction Information"),mt=c(()=>e("span",{class:"mr-1"},"Reference:",-1)),pt={class:"mb-5"},ft=c(()=>e("strong",null,"Buy rate:",-1)),vt={class:"mb-4"},ht=c(()=>e("strong",null,"Comment:",-1)),gt={class:"font-weight-normal mb-4"},wt=c(()=>e("strong",null,"Payable Amount:",-1)),bt={class:"font-weight-normal mb-4"},yt=c(()=>e("strong",null,"Asset Value:",-1)),Vt={class:"font-weight-normal mb-4"},xt=c(()=>e("strong",null,"Service Charge:",-1)),kt={class:"font-weight-normal mb-4"},Ct=c(()=>e("strong",null,"Rate:",-1)),At={class:"font-weight-normal mb-4"},It=c(()=>e("strong",null,"Date Created:",-1)),Rt={class:"font-weight-normal mb-4"},Dt=c(()=>e("strong",null,"Last Updated:",-1)),Tt=i(" Approve "),Nt=i(" Decline "),Mt=i(" Partial approve "),St=i("Review Information"),Yt={class:"font-weight-normal mb-4"},Bt=c(()=>e("strong",null,"Review Note: ",-1)),Ut={class:"font-weight-normal mb-5"},Ft=c(()=>e("strong",null,"Review By:",-1)),$t={class:"my-1"},Pt=i("Email: "),zt={class:"font-weight-bold"},jt=i("Full name: "),Et={class:"font-weight-bold"},Lt={class:"font-weight-normal mb-4"},qt=c(()=>e("strong",null,"Review amount:",-1)),Ht={class:"font-weight-normal mb-4"},Ot=c(()=>e("strong",null,"Review rate:",-1)),Gt={class:"font-weight-normal"},Jt=c(()=>e("strong",null,"Review At: ",-1)),Kt={key:0},Qt=i("User Information"),Wt={class:"font-weight-normal mb-4"},Xt=c(()=>e("strong",null,"First name:",-1)),Zt={class:"font-weight-normal mb-4"},eo=c(()=>e("strong",null,"Last name:",-1)),to={class:"font-weight-normal mb-4"},oo=c(()=>e("strong",null,"Email:",-1)),ao={class:"font-weight-normal mb-4"},lo=c(()=>e("strong",null,"Phone number:",-1)),so=i("Bank Information"),no={class:"font-weight-normal mb-4"},io=c(()=>e("strong",null,"Bank name:",-1)),ro={class:"font-weight-normal mb-4"},uo=c(()=>e("strong",null,"Account name:",-1)),co={class:"font-weight-normal mb-4"},_o=c(()=>e("strong",null,"Account number:",-1)),mo=i("Other Information"),po={class:"font-weight-normal mb-4"},fo=c(()=>e("strong",null,"Network name: ",-1)),vo=c(()=>e("strong",{class:"mb-4"},"Proof Image:",-1)),ho=c(()=>e("h3",null,"Decline Transaction",-1)),go=c(()=>e("p",null,"Enter Reasons for Declining this asset transaction",-1)),wo=i("Submit"),bo={class:"mb-3 d-flex justify-space-between"},yo=c(()=>e("h3",{class:"text-justify mt-7"},"Partial approval",-1)),Vo=c(()=>e("label",{for:"proof",class:"cursor-pointer"},[e("p",{class:"text-black"},"Upload transaction proof")],-1)),xo={key:0,for:"proof",class:"cursor-pointer"},ko=c(()=>e("img",{src:je,alt:"card-placeholder",class:"mt-3 w-full object-fill max-h-[174px] rounded-xl"},null,-1)),Co=[ko],Ao={class:"gap-5 mt-5",style:{display:"grid","grid-template-columns":"repeat(4, 80px)",gap:"12px"}},Io={style:{position:"relative"}},Ro=["src"],Do=["onClick"],To={key:1,class:"pt-3 text-center"},No={class:"p-2 block"},Mo={key:2,for:"proof",class:"mt-4 d-flex align-center cursor-pointer"},So=c(()=>e("img",{src:Ee,alt:"plus icon"},null,-1)),Yo=c(()=>e("p",{class:"ml-3 underline"},"Add more proof",-1)),Bo=[So,Yo],Uo=i("submit"),Fo=Le({__name:"transaction-view",setup(F){const{formatCurrency:B,formatNumber:$o}=lt(),{getSingleAssetTransactions:X,approveAssetTransactions:be,declineAssetTransactions:ye,partialApproveRequest:Ve}=we(),{dialog:N,loading:q,single_transactions:a,dialog2:M}=qe(we()),xe=f([{title:"Asset"},{title:"Network"},{title:"Type"},{title:"Rate"},{title:"Asset value"},{title:"Amount"}]);let Z=f(!1),H=f(1),ee=f(1);const te=et(),ke=tt(),Ce=d=>{ke.push({name:"UserDetails",params:{id:d}})},oe=f("");f("");const Ae=d=>d=="pending"?"yellow-darken-3":d=="approved"?"green lighten-3":d=="declined"?"red lighten-3":"",Ie=d=>d==="buy"?"green lighten-3":d==="sell"?"red lighten-3":"",Re=f(""),De=d=>{Re.value=d.target.files[0]},R=He({review_amount:"",review_note:"",review_proof:[]}),S=f([]),Te=(d,n)=>{S.value=S.value.filter(s=>s!==d),R.review_proof.splice(n,1)},Ne=d=>{Z.value=!0;let n=d.length,s=0;if(event){for(ee.value=d.length;n--;)Pe(d[s]).then(u=>{H.value++,S.value.push(u.secure_url),R.review_proof.push(u.secure_url)}),s++;H.value=0}};Oe(async()=>{await X(te.params.id)});const O=f(!1),G=f(!1),Me=()=>{G.value=!0},Se=()=>{O.value=!0},Ye=f(0),Be=f(0),ae=()=>(G.value=!1,O.value=!1),Ue=ie(()=>{var d;return Array((d=a==null?void 0:a.value)==null?void 0:d.proof)}),Fe=ie(()=>{var d;return Array((d=a==null?void 0:a.value)==null?void 0:d.review_proof)}),le=async()=>{await X(te.params.id)},k=f(!1);let g=f("");const $=f(""),J=(d,n)=>{k.value=!0,g.value=n,$.value=d},$e=async d=>{d=="approve"?(await be(g.value),le(),k.value=!1):d=="decline"?(ye(g.value),k.value=!1):d=="partial"&&(Ve(g.value,R),k.value=!1),k.value=!1};return Ge([N,M],([d,n],[s,u])=>{d===!1&&n===!1&&le()}),(d,n)=>(p(),b(j,null,[o(K,{modelValue:k.value,"onUpdate:modelValue":n[2]||(n[2]=s=>k.value=s),width:"500"},{default:l(()=>[o(y,null,{default:l(()=>[o(re,{dark:"",dense:"",flat:""},{default:l(()=>[o(de,{class:"text-body-2 font-weight-bold grey--text"},{default:l(()=>[nt]),_:1})]),_:1}),o(D,{class:"pa-4 black--text"},{default:l(()=>[i("Are you sure you want to "+r($.value==="partial"?"partially approve":$.value)+" this transaction?",1)]),_:1}),o(ue,{class:"pt-3"},{default:l(()=>[o(ce),o(V,{color:"grey",text:"",class:"body-2 font-weight-bold",onClick:n[0]||(n[0]=s=>k.value=!1)},{default:l(()=>[it]),_:1}),o(V,{color:"primary",class:"body-2 font-weight-bold",outlined:"",onClick:n[1]||(n[1]=s=>$e($.value))},{default:l(()=>[rt]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(E,null,{default:l(()=>[o(V,{class:"ml-4",link:"",size:"large",variant:"plain",color:"grey-darken-4",to:{name:"AssetsTransaction"}},{default:l(()=>[o(_e,{start:"",icon:"mdi-arrow-left"}),dt]),_:1}),o(z,{cols:"12",sm:"12",lg:"12"},{default:l(()=>[o(y,{rounded:"0",class:"pa-4"},{default:l(()=>[o(re,{color:"transparent"},{default:l(()=>[o(de,{class:"font-weight-medium"},{default:l(()=>[ut]),_:1}),o(ce)]),_:1}),o(T),o(Je,{class:"ksb-border my-10"},{default:l(()=>{var s,u,_,m,v,h,C,A,I;return[e("thead",null,[e("tr",ct,[(p(!0),b(j,null,Q(xe.value,(w,P)=>(p(),b("th",{key:P,class:"text-left"},r(w.title),1))),128))])]),e("tbody",null,[e("tr",null,[e("td",null,r((u=(s=t(a))==null?void 0:s.asset)==null?void 0:u.code),1),e("td",null,r((m=(_=t(a))==null?void 0:_.network)==null?void 0:m.name),1),e("td",null,r((v=t(a))==null?void 0:v.trade_type),1),e("td",null,r((h=t(a))==null?void 0:h.rate),1),e("td",null,[i(r((A=(C=t(a))==null?void 0:C.asset)==null?void 0:A.code)+" ",1),e("strong",null,r(t(a).asset_amount),1)]),e("td",null,r(t(B)((I=t(a))==null?void 0:I.payable_amount)),1)])])]}),_:1}),o(E,{class:"px-4"},{default:l(()=>[o(z,{cols:"12",sm:"12",lg:"6"},{default:l(()=>[o(y,{loading:t(q),class:"mx-auto my-12"},{loader:l(({isActive:s})=>[o(me,{active:s,color:"deep-purple",height:"4",indeterminate:""},null,8,["active"])]),default:l(()=>[o(pe,{class:"pa-0 mb-5"},{default:l(()=>[o(U,{class:"pa-4"},{default:l(()=>[_t]),_:1}),o(T),o(Ke,{class:"ml-6 my-2"},{default:l(()=>[mt,e("span",null,r(t(a).reference),1)]),_:1})]),_:1}),o(D,null,{default:l(()=>{var s,u,_,m,v,h,C;return[o(E,{align:"center",class:"mx-0 mb-3"},{default:l(()=>{var A,I;return[o(fe,{label:"",size:"small",density:"comfortable",class:"text-capitalize font-weight-bold pa-3 mr-4",color:Ae((A=t(a))==null?void 0:A.status)},{default:l(()=>{var w;return[i(r((w=t(a))==null?void 0:w.status),1)]}),_:1},8,["color"]),o(fe,{label:"",size:"small",density:"comfortable",class:"text-capitalize font-weight-bold pa-3",color:Ie((I=t(a))==null?void 0:I.trade_type)},{default:l(()=>{var w;return[i(r((w=t(a))==null?void 0:w.trade_type),1)]}),_:1},8,["color"])]}),_:1}),e("div",pt,[ft,i(" "+r((u=(s=t(a))==null?void 0:s.asset)==null?void 0:u.buy_rate),1)]),e("div",vt,[ht,i(" "+r((_=t(a))==null?void 0:_.comment),1)]),e("div",gt,[wt,i(" "+r(t(B)(t(a).payable_amount)),1)]),e("div",bt,[yt,i(" "+r((v=(m=t(a))==null?void 0:m.asset)==null?void 0:v.code)+" ",1),e("strong",null,r(t(a).asset_amount),1)]),e("div",Vt,[xt,i(" "+r(t(B)(t(a).service_charge/100*t(a).asset_amount*t(a).rate)),1)]),e("div",kt,[Ct,i(" \u20A6"+r(t(a).rate),1)]),e("div",At,[It,i(" "+r(t(W)((h=t(a))==null?void 0:h.created_at,"DD, MMMM-YYYY hh:mm a").value),1)]),e("div",Rt,[Dt,i(" "+r(t(W)((C=t(a))==null?void 0:C.updated_at,"DD, MMMM-YYYY hh:mm a").value),1)])]}),_:1}),t(a).status==="transferred"?(p(),Y(T,{key:0,class:"mx-4 mb-1"})):x("",!0),t(a).status==="transferred"||t(a).status==="pending"?(p(),Y(ue,{key:1},{default:l(()=>[o(V,{class:"mr-4",color:"green lighten-3",loading:d.approving,variant:"tonal",onClick:n[3]||(n[3]=s=>{var u;return J("approve",(u=t(a))==null?void 0:u.id)})},{default:l(()=>[Tt]),_:1},8,["loading"]),o(V,{color:"red lighten-3",variant:"tonal",onClick:n[4]||(n[4]=s=>{var u,_;return M.value=!0,L(g)?g.value=(u=t(a))==null?void 0:u.id:g=(_=t(a))==null?void 0:_.id})},{default:l(()=>[Nt]),_:1}),o(V,{color:"purple lighten-3",variant:"tonal",onClick:n[5]||(n[5]=s=>{var u,_;return N.value=!0,L(g)?g.value=(u=t(a))==null?void 0:u.id:g=(_=t(a))==null?void 0:_.id})},{default:l(()=>[Mt]),_:1})]),_:1})):x("",!0)]),_:1},8,["loading"]),o(y,null,{default:l(()=>{var s,u;return[o(U,null,{default:l(()=>[St]),_:1}),o(T),o(D,null,{default:l(()=>{var _,m,v,h,C,A,I,w,P,se,ne;return[e("div",Yt,[Bt,i(" "+r((m=(_=t(a))==null?void 0:_.review_note)!=null?m:"No data"),1)]),e("div",Ut,[Ft,e("p",$t,[Pt,e("span",zt,r((C=(h=(v=t(a))==null?void 0:v.reviewer)==null?void 0:h.email)!=null?C:"No data"),1)]),e("p",null,[jt,e("span",Et,r((I=(A=t(a))==null?void 0:A.reviewer)==null?void 0:I.firstname)+" "+r((P=(w=t(a))==null?void 0:w.reviewer)==null?void 0:P.lastname),1)])]),e("div",Lt,[qt,i(" "+r(t(B)(t(a).review_amount)),1)]),e("div",Ht,[Ot,i(" "+r(t(B)(t(a).review_amount/t(a).asset_amount)),1)]),e("div",Gt,[Jt,t(a).reviewed_at?(p(),b("span",Kt,r((ne=t(W)((se=t(a))==null?void 0:se.reviewed_at,"DD, MMMM-YYYY hh:mm a").value)!=null?ne:"No data"),1)):x("",!0)])]}),_:1}),((u=(s=t(a))==null?void 0:s.review_proof)==null?void 0:u.length)>0?(p(),Y(E,{key:0},{default:l(()=>{var _;return[(p(!0),b(j,null,Q((_=t(a))==null?void 0:_.review_proof,(m,v)=>(p(),Y(z,{key:v,cols:"12",sm:"6",md:"4",lg:"3"},{default:l(()=>[o(ve,{cover:"",width:"100",height:"100",onClick:Se,src:m,class:"cursor-pointer mt-4"},null,8,["src"])]),_:2},1024))),128))]}),_:1})):x("",!0)]}),_:1})]),_:1}),o(z,{cols:"12",sm:"12",lg:"6"},{default:l(()=>[o(y,{loading:t(q),class:"mx-auto my-12"},{loader:l(({isActive:s})=>[o(me,{active:s,color:"deep-purple",height:"4",indeterminate:""},null,8,["active"])]),default:l(()=>[o(pe,null,{default:l(()=>[o(U,null,{default:l(()=>[Qt]),_:1})]),_:1}),o(T),o(D,null,{default:l(()=>{var s,u,_,m;return[e("div",Wt,[Xt,i(" "+r((s=t(a).user)==null?void 0:s.firstname),1)]),e("div",Zt,[eo,i(" "+r((u=t(a).user)==null?void 0:u.lastname),1)]),e("div",to,[oo,e("span",{onClick:n[6]||(n[6]=v=>{var h;return Ce((h=t(a).user)==null?void 0:h.id)}),class:"text-underline ml-3"},r((_=t(a).user)==null?void 0:_.email),1)]),e("div",ao,[lo,i(" "+r((m=t(a).user)==null?void 0:m.phone_number),1)])]}),_:1})]),_:1},8,["loading"]),o(y,null,{default:l(()=>[o(U,null,{default:l(()=>[so]),_:1}),o(T),o(D,null,{default:l(()=>{var s,u,_,m,v,h;return[e("div",no,[io,i(" "+r((u=(s=t(a).bank)==null?void 0:s.name)!=null?u:" No bank"),1)]),e("div",ro,[uo,i(" "+r((m=(_=t(a))==null?void 0:_.account_name)!=null?m:" No account name"),1)]),e("div",co,[_o,i(" "+r((h=(v=t(a))==null?void 0:v.account_number)!=null?h:" No account number"),1)])]}),_:1})]),_:1}),o(y,{class:"my-12"},{default:l(()=>[o(U,null,{default:l(()=>[mo]),_:1}),o(T),o(D,null,{default:l(()=>{var s,u,_;return[e("div",po,[fo,i(" "+r((s=t(a).network)==null?void 0:s.name),1)]),vo,(u=t(a))!=null&&u.proof?(p(),Y(ve,{key:0,cover:"",width:"100",height:"100",onClick:Me,src:(_=t(a))==null?void 0:_.proof,class:"cursor-pointer mt-4"},null,8,["src"])):x("",!0)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(t(ge),{visible:G.value,imgs:t(Ue),index:Ye.value,onHide:ae},null,8,["visible","imgs","index"]),o(t(ge),{visible:O.value,imgs:t(Fe),index:Be.value,onHide:ae},null,8,["visible","imgs","index"]),t(M)?(p(),Y(K,{key:0,modelValue:t(M),"onUpdate:modelValue":n[9]||(n[9]=s=>L(M)?M.value=s:null),"max-width":"500px",width:"100%"},{default:l(()=>[o(y,{"max-width":"500px"},{default:l(()=>[o(D,null,{default:l(()=>[ho,go]),_:1}),o(Qe,{class:"mt-7"},{default:l(()=>[o(he,{label:"Comments",modelValue:oe.value,"onUpdate:modelValue":n[7]||(n[7]=s=>oe.value=s),variant:"outlined"},null,8,["modelValue"]),o(We,{onChange:De,hint:"Optional","persistent-hint":"",label:"Review proof","append-inner-icon":"mdi-paperclip","prepend-icon":""}),o(V,{color:"secondary",class:"my-5",block:"",loading:d.declining,onClick:n[8]||(n[8]=s=>J("decline",t(g)))},{default:l(()=>[wo]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):x("",!0),o(K,{modelValue:t(N),"onUpdate:modelValue":n[15]||(n[15]=s=>L(N)?N.value=s:null),"max-width":"429px","min-height":"476px"},{default:l(()=>[o(y,{class:"view-dialog pa-4"},{default:l(()=>[e("div",bo,[yo,o(V,{onClick:n[10]||(n[10]=s=>N.value=!1),icon:"mdi-close",color:"secondary",variant:"text"},{default:l(()=>[o(_e,{icon:"mdi-close"})]),_:1})]),o(Xe,{class:"my-10"},{default:l(()=>[o(Ze,{prefix:"\u20A6\u200E",modelValue:R.review_amount,"onUpdate:modelValue":n[11]||(n[11]=s=>R.review_amount=s),type:"number",variant:"outlined",label:"Amount"},null,8,["modelValue"]),o(he,{modelValue:R.review_note,"onUpdate:modelValue":n[12]||(n[12]=s=>R.review_note=s),variant:"outlined",label:"Review Note"},null,8,["modelValue"]),Vo,S.value.length?x("",!0):(p(),b("label",xo,Co)),e("input",{type:"file",multiple:"",id:"proof",ref:"fileInput",style:{display:"none"},accept:"image/*",onChange:n[13]||(n[13]=s=>Ne(s.target.files))},null,544),e("div",Ao,[(p(!0),b(j,null,Q(S.value,(s,u)=>(p(),b("div",{key:u},[e("div",Io,[e("img",{class:"w-full cursor-pointer",style:{height:"75px","object-fit":"cover",width:"100%"},src:s},null,8,Ro),e("img",{src:ze,class:"absolute rounded-full border border-red-700 -top-2 -right-2 bg-red-200 text-red-500 cursor-pointer",style:{position:"absolute",right:"-5px",top:"-5px"},width:"20",onClick:_=>Te(s,u)},null,8,Do)])]))),128))]),t(Z)?(p(),b("div",To,[e("small",No,"Uploaded "+r(t(H))+" of "+r(t(ee))+"...",1)])):x("",!0),S.value.length?(p(),b("label",Mo,Bo)):x("",!0),o(V,{loading:t(q),onClick:n[14]||(n[14]=s=>J("partial",t(g))),block:"",class:"mt-5",color:"secondary"},{default:l(()=>[Uo]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64))}});var Oo=st(Fo,[["__scopeId","data-v-78623fd3"]]);export{Oo as default};
