import{d as _e,f as x,Y as A,aY as b,a0 as k,a as ge,s as X,B as J,r as _,ai as ve,h as ye,o as g,c as S,b as e,e as f,w as s,D as B,a7 as N,a6 as p,H as I,aE as Ce,u as a,a2 as O,at as Ve,F as z,k as K,x as T,j as Q,au as he,ar as xe,av as Ae,a9 as be,aq as ke,t as v,a1 as Se,T as Ge,ao as Pe,aX as D,a8 as we,I as $e,m as y,M as Ie,ap as Ue,ag as L}from"./index.d08b3963.js";import{_ as je}from"./BaseBreadcrumb.96e6869c.js";import{u as Ee}from"./country.cb4beb97.js";import{u as Be}from"./giftcard.f59d4277.js";import{u as Te}from"./useFormatter.be1a3376.js";import{_ as qe}from"./plugin-vue_export-helper.21dcd24c.js";/* empty css                                                       */import"./filedownloader.f3cc1d55.js";const W=_e("gift_product",{state:()=>({giftCard:{name:"",currency:"",country:[],sell_rate:0,sell_min_amount:"",sell_max_amount:"",giftcard_category:[]},loading:!1,gift_products:{name:"",country_id:"",currency_id:"",sell_rate:"",sell_min_amount:"",sell_max_amount:"",giftcard_category_id:"",id:"",data:"",giftcard_id:""},dialog:!1,singleGiftProduct:{}}),getters:{},actions:{async getAllGifCardProduct(n=1,i="",c=""){const{notify:l}=k();this.loading=!0;const m=x();try{await A.get(b+"?include=currency,giftcardCategory,country&page="+n+"&filter[name]="+i.toLowerCase()+"&filter[activated]="+c+"&per_page=100",{headers:{Accept:"application/json",Authorization:`Bearer ${m.token}`}}).then(u=>{this.loading=!1,this.gift_products=u.data.data.giftcard_products})}catch(u){this.loading=!1,l({title:"An Error Occurred",text:u.response.data.message,type:"error"})}},async createGiftCardProduct(n){const i=x(),{notify:c}=k();var l=new FormData;l.append("giftcard_category_id",n.giftcard_category),l.append("country_id",n.country),l.append("currency_id",n.currency),l.append("name",n.name),l.append("sell_rate",n.sell_rate),l.append("sell_min_amount",n.sell_min_amount),l.append("sell_max_amount",n.sell_max_amount),this.loading=!0;try{await A.post(b,l,{headers:{Accept:"application/json",Authorization:`Bearer ${i.token}`}}).then(m=>{this.loading=!1,c({title:"Successful",text:m.data.message,type:"success"});const u={name:"",country_id:"",currency_id:"",sell_rate:"",sell_min_amount:"",sell_max_amount:"",giftcard_category_id:"",id:"",data:"",giftcard_id:""};this.giftCard=Object.assign({},u),this.dialog=!1,this.getAllGifCardProduct()})}catch(m){this.loading=!1,c({title:"An Error Occurred",text:m.response.data.message,type:"error"})}},async editGiftCardProduct(n){const i=x(),{notify:c}=k();var l=new FormData;l.append("giftcard_category_id",n.giftcard_category_id),l.append("country_id",n.country_id),l.append("currency_id",n.currency_id),l.append("name",n.name),l.append("sell_rate",n.sell_rate),l.append("sell_min_amount",n.sell_min_amount),l.append("sell_max_amount",n.sell_max_amount),l.append("_method","PATCH"),this.loading=!0;try{await A.post(b+"/"+n.id,l,{headers:{Accept:"application/json",Authorization:`Bearer ${i.token}`}}).then(m=>{this.loading=!1,c({title:"Successful",text:m.data.message,type:"success"}),this.dialog=!1,this.getAllGifCardProduct()})}catch(m){this.loading=!1,c({title:"An Error Occurred",text:m.response.data.message,type:"error"})}},async getSingleGifCardCategories(n){const{notify:i}=k(),c=x();try{await A.get(b+"/"+n,{headers:{Accept:"application/json",Authorization:`Bearer ${c.token}`}}).then(l=>{this.singleGiftProduct=l.data.data.giftcard_product})}catch(l){i({title:"An Error Occurred",text:l.response.data.message,type:"error"})}},async deleteGifCardProducts(n){if(confirm("Are you sure you want to delete this gift card Item?")){const{notify:i}=k(),c=x();try{await A.delete(b+"/"+n,{headers:{Accept:"application/json",Authorization:`Bearer ${c.token}`}}).then(l=>{i({title:"Successful",text:"Item deleted successfully",type:"success"}),this.getAllGifCardProduct()})}catch(l){i({title:"An Error Occurred",text:l.response.data.message,type:"error"})}}},async restoreGifCardProduct(n){if(confirm("Are you sure you want to restore this gift card Item?")){const{notify:i}=k(),c=x();try{await A.patch(b+"/"+n+"/restore","",{headers:{Accept:"application/json",Authorization:`Bearer ${c.token}`}}).then(l=>{i({title:"Successful",text:"Item restored successfully",type:"success"}),this.getAllGifCardProduct()})}catch(l){i({title:"An Error Occurred",text:l.response.data.message,type:"error"})}}},async activationGifCardProduct(n){if(confirm("Are you sure you want to activation this gift card Item ?")){const{notify:i}=k(),c=x();try{await A.patch(b+"/"+n+"/activation","",{headers:{Accept:"application/json",Authorization:`Bearer ${c.token}`}}).then(l=>{i({title:"Successful",text:"Item restored successfully",type:"success"}),this.getAllGifCardProduct()})}catch(l){i({title:"An Error Occurred",text:l.response.data.message,type:"error"})}}}}});const Fe={class:"w-full d-flex justify-end my-3"},Ne=y(" Create new giftcard product "),Oe=y("Filter data"),ze={key:0},De=y("mdi-eye"),Le=y("mdi-pencil"),Re=y("mdi-delete"),Me={key:1,class:"text-center py-6"},He={class:"text-h5 font-weight-bold pa-7"},Ye=y(" Close "),Xe=ge({__name:"products",setup(n){const{countries:i,giftCardCategories:c,currencies:l,giftCategories:m}=X(Ee()),{giftCard:u,loading:P,dialog:G,gift_products:U}=X(W()),{getSingleGifCardCategories:Z}=Be(),{createGiftCardProduct:ee,getAllGifCardProduct:w,deleteGifCardProducts:te,activationGifCardProduct:ae,editGiftCardProduct:le}=W(),{sortItems:re}=Te(),oe=J(()=>m.value.find(d=>{var t;if(d.id==u.value.giftcard_category)return d.countries;if(d.id==((t=u.value.giftcard_category)==null?void 0:t.id))return d.countries})),se=J(()=>{var d,t;return(t=(d=oe.value)==null?void 0:d.countries)==null?void 0:t.filter(E=>E)}),ne=_({title:"Gift Card Product"}),ue=_([{text:"Cards",disabled:!1,href:"#"},{text:"Products",disabled:!0,href:"#"}]),R=_(!1),de=_([d=>!!d||"Giftcard name is required"]),ie=ve([{title:"No"},{title:"Name"},{title:"Sell Rate"},{title:"Sell min amount"},{title:"Sell max amount"},{title:"Status"},{title:"Toggle activation"},{title:"Actions"}]),C=_(1);ye(async()=>{await w(C.value,V.value,h.value)});const ce=d=>d!==null?"Activated":"Not active",fe=d=>d!==null?"green lighten-3":"red lighten-3",q=_(!1),j=_("Create Item"),me=d=>{u.value=Object.assign({},d),j.value="Update Item",G.value=!0,q.value=!0},pe=()=>{G.value=!1,u.value=Object.assign({},{name:"",country_id:"",currency_id:"",sell_rate:"",sell_min_amount:"",sell_max_amount:"",giftcard_category_id:"",id:"",data:"",giftcard_id:""}),j.value="Create Item",q.value=!1},V=_(""),h=_("");return(d,t)=>{var E;return g(),S(z,null,[e(je,{title:ne.value.title,breadcrumbs:ue.value},null,8,["title","breadcrumbs"]),f("div",Fe,[e(B,{"prepend-icon":"mdi-plus",onClick:t[0]||(t[0]=o=>G.value=!0),variant:"flat",color:"secondary"},{default:s(()=>[Ne]),_:1})]),e(O,{flat:"",elevation:"0",rounded:"0",class:"my-5 pa-4"},{default:s(()=>[e(N,{class:"mt-3"},{default:s(()=>[e(p,{cols:"12",sm:"6",md:"4"},{default:s(()=>[e(I,{label:"Filter by product name",density:"compact",modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=o=>V.value=o),variant:"outlined","onClick:clear":d.clearMessage,clearable:""},null,8,["modelValue","onClick:clear"])]),_:1}),e(p,{cols:"12",sm:"6",md:"4"},{default:s(()=>[e(Ce,{modelValue:h.value,"onUpdate:modelValue":t[2]||(t[2]=o=>h.value=o),label:"Filter by activation status",density:"compact",items:["Active","Not active"],variant:"outlined"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",sm:"6",md:"4"},{default:s(()=>[e(B,{onClick:t[3]||(t[3]=o=>a(w)(C.value,V.value,h.value=="Active"?1:0)),block:"",loading:a(P),color:"secondary"},{default:s(()=>[Oe]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),e(O,{class:"my-4"},{default:s(()=>{var o,M;return[e(Ve,null,{default:s(()=>{var H,Y;return[f("thead",null,[f("tr",null,[(g(!0),S(z,null,K(ie,(r,F)=>(g(),S("th",{key:F,class:"text-left"},v(r.title),1))),128))])]),a(P)==!1&&((Y=(H=a(U))==null?void 0:H.data)==null?void 0:Y.length)>0?(g(),S("tbody",ze,[(g(!0),S(z,null,K(a(re)(a(U).data),(r,F)=>(g(),S("tr",{key:r==null?void 0:r.id},[f("td",null,v(F+1),1),f("td",null,v(r==null?void 0:r.name),1),f("td",null,v(r.sell_rate.toLocaleString()),1),f("td",null,"\u20A6\u200E "+v(r.sell_min_amount.toLocaleString()),1),f("td",null,"\u20A6\u200E "+v(r.sell_max_amount.toLocaleString()),1),f("td",null,[e(Ie,{label:"",class:"pa-2",color:fe(r==null?void 0:r.activated_at)},{default:s(()=>[y(v(ce(r==null?void 0:r.activated_at)),1)]),_:2},1032,["color"])]),f("td",null,[e(Ue,{color:(r==null?void 0:r.activated_at)!==null?"secondary":null,value:r==null?void 0:r.activated_at,modelValue:r.activated_at,"onUpdate:modelValue":$=>r.activated_at=$,onInput:$=>a(ae)(r==null?void 0:r.id)},null,8,["color","value","modelValue","onUpdate:modelValue","onInput"])]),f("td",null,[e(L,{small:"",class:"mr-2 text-secondary cursor-pointer",onClick:$=>d.showDetails(r==null?void 0:r.id),title:"view"},{default:s(()=>[De]),_:2},1032,["onClick"]),e(L,{small:"",class:"mr-2 text-primary cursor-pointer",onClick:$=>me(r),title:"Edit"},{default:s(()=>[Le]),_:2},1032,["onClick"]),e(L,{small:"",class:"text-error cursor-pointer",title:"Delete",onClick:$=>a(te)(r==null?void 0:r.id)},{default:s(()=>[Re]),_:2},1032,["onClick"])])]))),128))])):T("",!0)]}),_:1}),a(P)==!0?(g(),Q(xe,{key:0,class:"align-center justify-center w-100 my-5"},{default:s(()=>[e(he,{indeterminate:""})]),_:1})):T("",!0),a(P)==!1&&((M=(o=a(U))==null?void 0:o.data)==null?void 0:M.length)<=0?(g(),S("p",Me," No data available ")):T("",!0)]}),_:1}),e(Ae,{modelValue:C.value,"onUpdate:modelValue":[t[4]||(t[4]=o=>C.value=o),t[7]||(t[7]=o=>a(w)(C.value,V.value,h.value))],length:(E=a(U))==null?void 0:E.last_page,onNext:t[5]||(t[5]=o=>a(w)(C.value,V.value,h.value)),onPrev:t[6]||(t[6]=o=>a(w)(C.value,V.value,h.value)),"active-color":"red",start:1,variant:"flat",class:"mt-5",color:"bg-secondary",rounded:"circle"},null,8,["modelValue","length"]),e(N,{justify:"center"},{default:s(()=>[e(be,{modelValue:a(G),"onUpdate:modelValue":t[17]||(t[17]=o=>ke(G)?G.value=o:null),"max-width":"500px",persistent:""},{default:s(()=>[e(O,null,{default:s(()=>[f("h3",He,v(j.value),1),e(Se,null,{default:s(()=>[e(Ge,null,{default:s(()=>[e(Pe,{ref:"form",modelValue:R.value,"onUpdate:modelValue":t[15]||(t[15]=o=>R.value=o),"lazy-validation":""},{default:s(()=>[e(N,null,{default:s(()=>[e(p,{cols:"12",sm:"6",md:"12"},{default:s(()=>[e(I,{modelValue:a(u).name,"onUpdate:modelValue":t[8]||(t[8]=o=>a(u).name=o),rules:de.value,variant:"outlined",label:"Giftcard product name*",required:""},null,8,["modelValue","rules"])]),_:1}),e(p,{cols:"12",sm:"6",md:"12"},{default:s(()=>[e(I,{modelValue:a(u).sell_rate,"onUpdate:modelValue":t[9]||(t[9]=o=>a(u).sell_rate=o),variant:"outlined",label:"Selling Rate*",prefix:"\u20A6\u200E",required:"",type:"number"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:s(()=>[e(I,{modelValue:a(u).sell_min_amount,"onUpdate:modelValue":t[10]||(t[10]=o=>a(u).sell_min_amount=o),variant:"outlined",label:"Selling amount*",required:"",prefix:"\u20A6\u200E",type:"number"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",sm:"12"},{default:s(()=>[e(I,{modelValue:a(u).sell_max_amount,"onUpdate:modelValue":t[11]||(t[11]=o=>a(u).sell_max_amount=o),variant:"outlined",label:"Selling Max Amount*",required:"",prefix:"\u20A6\u200E",type:"number"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",sm:"12"},{default:s(()=>[e(D,{variant:"outlined",items:a(c),label:"Giftcard categories*",required:"","onUpdate:modelValue":[a(Z),t[12]||(t[12]=o=>a(u).giftcard_category=o)],"item-title":"name","item-value":"id",modelValue:a(u).giftcard_category},null,8,["items","onUpdate:modelValue","modelValue"])]),_:1}),a(u).giftcard_category?(g(),Q(p,{key:0,cols:"12",sm:"12"},{default:s(()=>[e(D,{items:a(se),label:"Countries*",required:"",variant:"outlined","item-title":"name","item-value":"id",modelValue:a(u).country,"onUpdate:modelValue":t[13]||(t[13]=o=>a(u).country=o),hint:"This field is required","persistent-hint":""},null,8,["items","modelValue"])]),_:1})):T("",!0),e(p,{cols:"12",sm:"12"},{default:s(()=>[e(D,{items:a(l),variant:"outlined",label:"Currency*",required:"",modelValue:a(u).currency,"onUpdate:modelValue":t[14]||(t[14]=o=>a(u).currency=o),"item-title":"code","item-value":"id"},null,8,["items","modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(we,null,{default:s(()=>[e($e),e(B,{color:"secondary",class:"px-7",variant:"outlined",onClick:pe},{default:s(()=>[Ye]),_:1}),e(B,{loading:a(P),onClick:t[16]||(t[16]=o=>q.value==!0?a(le)(a(u)):a(ee)(a(u))),color:"secondary",class:"px-12",variant:"flat"},{default:s(()=>[y(v(j.value),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}});var lt=qe(Xe,[["__scopeId","data-v-53661a2e"]]);export{lt as default};
