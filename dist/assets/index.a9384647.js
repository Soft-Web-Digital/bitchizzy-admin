import{a as H,s as z,r as g,h as G,o as r,c as m,e as s,b as l,w as n,D as x,at as J,F as M,k as A,u as e,x as B,j as K,au as Q,ar as W,a2 as N,av as X,t as d,ao as Z,aE as ee,H as U,C as te,aq as ae,a9 as le,m as b,a7 as ne,N as oe,q as se,V as ue,p as Y,v as $}from"./index.d08b3963.js";import{u as j}from"./user.35ce0bfe.js";import{u as L}from"./index.f137f2c7.js";import"./filedownloader.f3cc1d55.js";import"./country.cb4beb97.js";const de=s("h2",{class:"my-5"},"System bank accounts",-1),re={class:"d-flex align-center justify-end mb-4"},ie=b("Add a system bank"),me={key:0},ce=b(" Update Details "),_e=b(" Delete Bank "),fe={key:1,class:"text-center font-weight-bold mb-4 py-5"},ve=b("Submit"),xe=H({__name:"index",setup(pe){const{bank_info:_,loading:f,dialog2:c,banks:F}=z(j()),{getSystemBanks:v,getBanks:T,createSystemBanks:P,updateSystemBanks:R,deleteSystemBanks:q}=j(),i=g(1),C=g(""),p=g(!1);let u=g({bank_name:"",account_number:"",account_name:""});const E=V=>{u.value=Object.assign({},V),p.value=!0},I=V=>{u.value=Object.assign({},{bank_name:"",account_number:"",account_name:""}),p.value=V},O=[{title:"No."},{title:"Bank name"},{title:"Account name"},{title:"Account number"},{title:"Date created"},{title:"Last updated"},{title:"Actions"}];return G(async()=>{await v(i.value),await T()}),(V,t)=>{var D;return r(),m("div",null,[de,s("div",re,[l(x,{onClick:t[0]||(t[0]=a=>c.value=!0),color:"secondary"},{default:n(()=>[ie]),_:1})]),l(N,null,{default:n(()=>{var a,h;return[l(J,null,{default:n(()=>{var w,S;return[s("thead",null,[s("tr",null,[(r(),m(M,null,A(O,(o,y)=>s("th",{key:y,class:"text-left font-weight-bold"},d(o.title),1)),64))])]),((S=(w=e(_))==null?void 0:w.system_bank_accounts)==null?void 0:S.length)>0&&e(f)==!1?(r(),m("tbody",me,[(r(!0),m(M,null,A(e(_).system_bank_accounts,(o,y)=>(r(),m("tr",{class:"pa-1",key:y},[s("td",null,d(y+1),1),s("td",null,d(o.account_name),1),s("td",null,d(o.account_number),1),s("td",null,d(o.bank_name),1),s("td",null,d(e(L)(o==null?void 0:o.created_at,"DD, MMM YYYY - hh:mm a").value),1),s("td",null,d(e(L)(o==null?void 0:o.updated_at,"DD, MMM YYYY - hh:mm a").value),1),s("td",null,[l(ne,{justify:"center"},{default:n(()=>[l(oe,{transition:"scroll-y-transition"},{activator:n(({props:k})=>[l(x,se({text:"",icon:"mdi-dots-vertical",color:"transparent",class:"ma-2"},k),null,16)]),default:n(()=>[l(ue,null,{default:n(()=>[l(Y,{onClick:k=>{E(o),c.value=!0,C.value=o.id},link:"",color:"secondary"},{default:n(()=>[l($,null,{default:n(()=>[ce]),_:1})]),_:2},1032,["onClick"]),l(Y,{onClick:k=>e(q)(o.id),link:"",color:"secondary"},{default:n(()=>[l($,null,{default:n(()=>[_e]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))])):B("",!0)]}),_:1}),e(f)==!0?(r(),K(W,{key:0,class:"align-center justify-center w-100 my-5"},{default:n(()=>[l(Q,{indeterminate:""})]),_:1})):B("",!0),((h=(a=e(_))==null?void 0:a.system_bank_accounts)==null?void 0:h.length)<=0&&e(f)==!1?(r(),m("p",fe," No data available ")):B("",!0)]}),_:1}),l(X,{modelValue:i.value,"onUpdate:modelValue":[t[1]||(t[1]=a=>i.value=a),t[4]||(t[4]=a=>e(v)(i.value))],length:(D=e(_))==null?void 0:D.last_page,onNext:t[2]||(t[2]=a=>e(v)(i.value)),onPrev:t[3]||(t[3]=a=>e(v)(i.value)),"active-color":"red",start:1,variant:"flat",class:"mt-5",color:"bg-secondary",rounded:"circle"},null,8,["modelValue","length"]),l(le,{"onUpdate:modelValue":[I,t[9]||(t[9]=a=>ae(c)?c.value=a:null)],modelValue:e(c),"max-width":"500px"},{default:n(()=>[l(N,{class:"pa-4"},{default:n(()=>[s("h3",null,d(p.value?"Update bank details":"Add a bank"),1),l(Z,{class:"mt-8 py-8"},{default:n(()=>[l(ee,{modelValue:e(u).bank_name,"onUpdate:modelValue":t[5]||(t[5]=a=>e(u).bank_name=a),label:"Select a bank","item-value":"name","item-title":"name",variant:"outlined",items:e(F)},null,8,["modelValue","items"]),l(U,{type:"number",modelValue:e(u).account_number,"onUpdate:modelValue":t[6]||(t[6]=a=>e(u).account_number=a),label:"Account number",rules:[a=>a&&a.length===10||"Account number must be 10 characters"],variant:"outlined"},null,8,["modelValue","rules"]),l(U,{type:"text",modelValue:e(u).account_name,"onUpdate:modelValue":t[7]||(t[7]=a=>e(u).account_name=a),label:"Account name",variant:"outlined"},null,8,["modelValue"]),l(x,{onClick:t[8]||(t[8]=te(a=>p.value==!0?e(R)({...e(u),id:C.value}):e(P)(e(u)),["stop"])),color:"primary",block:"",loading:e(f)},{default:n(()=>[ve]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});export{xe as default};
