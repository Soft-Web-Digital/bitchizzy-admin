import{u as ae}from"./user.35ce0bfe.js";import{u as oe}from"./roles-permissions.ddc29794.js";import{a as De,s as F,r as x,ai as Re,h as Ue,o as u,c as _,b as e,w as l,e as o,D as v,at as je,F as R,k as U,u as t,x as j,j as I,au as Ie,ar as Ne,a2 as N,a9 as L,aq as P,aC as Y,t as d,a1 as O,T as z,ao as Te,a7 as C,a6 as T,H as E,aX as ne,a8 as G,I as H,O as Be,P as se,M as B,m as i,ap as $e,N as qe,q as Me,V as Fe,p as $,v as q,a3 as Le,a4 as Pe}from"./index.d08b3963.js";import{u as de}from"./country.cb4beb97.js";import{_ as Ye}from"./plugin-vue_export-helper.21dcd24c.js";import{u as Oe}from"./index.f137f2c7.js";import"./filedownloader.f3cc1d55.js";const h=w=>(Le("data-v-3cce862b"),w=w(),Pe(),w),ze={class:"d-flex align-center justify-space-between"},Ee=h(()=>o("h3",null,"All Admins",-1)),Ge=i("Create Admin"),He={key:0},Je={class:"d-flex align-center"},Xe={class:"ml-2"},Ke={class:"font-weight-bold"},Qe={class:"ml-1 font-weight-bold"},We=i(" View Details "),Ze=i(" Update admin "),el=i(" Assign role "),ll=i(" Delete admin "),tl={key:1,class:"mt-7"},al=h(()=>o("td",{colspan:"8",class:"text-center"},"No data found",-1)),ol=[al],nl={class:"text-h5 font-weight-bold"},sl=i(" Close "),dl=i(" Submit "),ul=h(()=>o("h3",{class:"text-h5 font-weight-bold"},"Admin Details",-1)),il={class:"d-flex align-center justify-center w-100 my-5"},rl={class:"d-flex align-center justify-center flex-column w-100"},cl={key:1,class:"text-h5 text-uppercase"},_l={class:"text-center"},fl={class:"font-weight-bold mt-2"},ml=i(" Phone: "),pl={class:"font-weight-light"},gl={class:"font-weight-bold mt-2"},vl=i(" Status: "),yl={class:"mt-6 d-flex align-center flex-column w-100"},hl={class:"mt-5"},Vl=h(()=>o("p",{class:"font-weight-bold mb-2"},"Giftcard categories:",-1)),kl={key:0},bl={class:"mt-5"},xl=h(()=>o("p",{class:"font-weight-bold mb-2"},"Roles:",-1)),Cl={key:0},wl=i(" Close "),Al=h(()=>o("h3",{class:"text-h5 font-weight-bold"},"Assign Role",-1)),Sl={class:"d-flex align-center justify-center w-100 my-5"},Dl=i(" Close "),Rl=i(" Submit "),Ul=De({__name:"index",setup(w){const{getAdmin:ue,CreateAdmin:ie,deleteAdmin:re,restoreAdmin:jl,blockAdmin:ce,getSingleAdmin:_e,updateAdminDetails:fe}=ae(),{getAllRoles:me,assignRole:pe}=oe(),{roles:ge,assign_role_form:A,dialog3:V,isAssigning:ve}=F(oe()),{admin:M,loading:S,dialog:y,adminDetails:f,id:Il,dialog2:D,single_admin:r}=F(ae()),ye=x(null),{all_country:he}=F(de()),{getAllCountry:Ve}=de(),ke=Re([{title:"Id"},{title:"User Info"},{title:"Roles"},{title:"Country"},{title:"Blocked at"},{title:"Date Joined"},{title:"Actions"}]),be=()=>{y.value=!1,f.value=Object.assign({},{firstname:"",lastname:"",email:"",country_name:""})};Ue(async()=>{await ue(),await me(),await Ve()});const J=m=>m?"Blocked":"Active",X=m=>m?"red lighten-3":"green lighten-3",K=x(!1),Q=x("Create Admin"),xe=async m=>{f.value=Object.assign({},m),Q.value="Update admin details",y.value=!0,K.value=!0},W=x(""),Ce=async m=>{V.value=!0,W.value=m},we=()=>{V.value=!1,A.value.role_id=""},Ae=async()=>{await pe(W.value,A.value)},Z=x(null),Se=m=>{const n=m.map(s=>s.name);return String(n)};return(m,n)=>(u(),_("div",null,[e(N,{class:"pa-3",rounded:"0"},{default:l(()=>[o("div",ze,[Ee,e(v,{onClick:n[0]||(n[0]=s=>y.value=!0),"prepend-icon":"mdi-account-plus",color:"secondary"},{default:l(()=>[Ge]),_:1})]),e(je,{class:"my-5"},{default:l(()=>{var s,p;return[o("thead",null,[o("tr",null,[(u(!0),_(R,null,U(ke,(a,g)=>(u(),_("td",{class:"font-weight-bold",key:g},d(a.title),1))),128))])]),((s=t(M))==null?void 0:s.length)>0&&t(S)===!1?(u(),_("tbody",He,[(u(!0),_(R,null,U(t(M),(a,g)=>{var c,k,ee,le,te;return u(),_("tr",{key:g},[o("td",null,"# "+d(g+1),1),o("td",null,[o("div",Je,[o("div",null,[e(se,{width:"45px",src:(c=a==null?void 0:a.avatar)!=null?c:"https://via.placeholder.com/15",class:"rounded-circle"},null,8,["src"])]),o("div",Xe,[o("span",Ke,d(a==null?void 0:a.firstname),1),o("span",Qe,d(a==null?void 0:a.lastname),1),o("p",null,d((k=a==null?void 0:a.email)!=null?k:"No data"),1)])])]),o("td",null,d(Se(a==null?void 0:a.roles)),1),o("td",null,d((le=(ee=a==null?void 0:a.country)==null?void 0:ee.name)!=null?le:"No data"),1),o("td",null,[e(B,{label:"",class:"pa-2",color:X(a==null?void 0:a.blocked_at)},{default:l(()=>[i(d(J(a==null?void 0:a.blocked_at)),1)]),_:2},1032,["color"])]),o("td",null,d((te=t(Oe)(a==null?void 0:a.created_at,"DD, MMMM-YYYY").value)!=null?te:"No data"),1),o("td",null,[e(C,{justify:"center"},{default:l(()=>[e(qe,{transition:"scroll-y-transition"},{activator:l(({props:b})=>[e(v,Me({text:"",icon:"mdi-dots-vertical",color:"transparent",class:"ma-2"},b),null,16)]),default:l(()=>[e(Fe,null,{default:l(()=>[e($,{onClick:b=>t(_e)(a==null?void 0:a.id),link:"",color:"secondary"},{default:l(()=>[e(q,null,{default:l(()=>[We]),_:1})]),_:2},1032,["onClick"]),e($,{onClick:b=>xe(a),link:"",color:"secondary"},{default:l(()=>[e(q,null,{default:l(()=>[Ze]),_:1})]),_:2},1032,["onClick"]),e($,{onClick:b=>Ce(a==null?void 0:a.id),link:"",color:"secondary"},{default:l(()=>[e(q,null,{default:l(()=>[el]),_:1})]),_:2},1032,["onClick"]),e($,{onClick:b=>t(re)(a==null?void 0:a.id),link:"",color:"secondary"},{default:l(()=>[e(q,null,{default:l(()=>[ll]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])])}),128))])):t(S)===!1&&((p=t(M))==null?void 0:p.length)<=0?(u(),_("tr",tl,ol)):j("",!0)]}),_:1}),t(S)==!0?(u(),I(Ne,{key:0,class:"align-center justify-center w-100 my-5"},{default:l(()=>[e(Ie,{indeterminate:""})]),_:1})):j("",!0)]),_:1}),e(C,{justify:"center"},{default:l(()=>[e(L,{modelValue:t(y),"onUpdate:modelValue":n[7]||(n[7]=s=>P(y)?y.value=s:null),persistent:"","max-width":"550px"},{default:l(()=>[e(N,null,{default:l(()=>[e(Y,{class:"py-4"},{default:l(()=>[o("h3",nl,d(Q.value),1)]),_:1}),e(O,null,{default:l(()=>[e(z,null,{default:l(()=>[e(Te,{ref_key:"form",ref:ye,modelValue:Z.value,"onUpdate:modelValue":n[5]||(n[5]=s=>Z.value=s),"lazy-validation":""},{default:l(()=>[e(C,null,{default:l(()=>[e(T,{cols:"12",sm:"6",md:"12"},{default:l(()=>[e(E,{modelValue:t(f).firstname,"onUpdate:modelValue":n[1]||(n[1]=s=>t(f).firstname=s),label:"First name*",required:""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"6",md:"12"},{default:l(()=>[e(E,{modelValue:t(f).lastname,"onUpdate:modelValue":n[2]||(n[2]=s=>t(f).lastname=s),label:"Last name*",required:""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12"},{default:l(()=>[e(E,{modelValue:t(f).email,"onUpdate:modelValue":n[3]||(n[3]=s=>t(f).email=s),label:"Email*",required:""},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",sm:"12"},{default:l(()=>[e(ne,{items:t(he),label:"Countries","no-filter":"",required:"","item-title":"name","item-value":"id",modelValue:t(f).country,"onUpdate:modelValue":n[4]||(n[4]=s=>t(f).country=s)},null,8,["items","modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(G,null,{default:l(()=>[e(H),e(v,{color:"secondary",class:"px-7",variant:"outlined",onClick:be},{default:l(()=>[sl]),_:1}),e(v,{loading:t(S),onClick:n[6]||(n[6]=s=>{var p;return K.value==!1?t(ie)():t(fe)((p=t(f))==null?void 0:p.id)}),color:"secondary",class:"px-12",variant:"flat"},{default:l(()=>[dl]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(C,{justify:"center"},{default:l(()=>[e(L,{modelValue:t(D),"onUpdate:modelValue":n[10]||(n[10]=s=>P(D)?D.value=s:null),persistent:"","max-width":"500px"},{default:l(()=>[e(N,null,{default:l(()=>[e(Y,{class:"py-4"},{default:l(()=>[ul]),_:1}),e(O,null,{default:l(()=>[e(z,null,{default:l(()=>{var s,p,a,g;return[o("div",il,[o("div",rl,[e(Be,{color:"secondary",size:80,class:"my-4 position-relative"},{default:l(()=>[t(r).avatar!==null?(u(),I(se,{key:0,cover:"",src:t(r).avatar},null,8,["src"])):(u(),_("span",cl,d(t(r).email.slice(0,2)),1))]),_:1}),o("h3",null,d(t(r).firstname)+" "+d(t(r).lastname),1),o("div",_l,[o("p",null,d(t(r).email),1),o("p",fl,[ml,o("span",pl,d((s=t(r).phone_number)!=null?s:"No data"),1)]),o("p",gl,[vl,e(B,{label:"",class:"pa-2",color:X((p=t(r))==null?void 0:p.blocked_at)},{default:l(()=>{var c;return[i(d(J((c=t(r))==null?void 0:c.blocked_at)),1)]}),_:1},8,["color"])]),o("div",yl,[e($e,{color:"secondary","hide-details":"",inset:"",class:"ml-4",onInput:n[8]||(n[8]=c=>{var k;return t(ce)((k=t(r))==null?void 0:k.id)}),label:"Toggle Blocked Status"})]),o("div",hl,[Vl,(u(!0),_(R,null,U(t(r).giftcard_categories,c=>(u(),I(B,{color:"secondary",class:"ml-2 mb-2",key:c.id},{default:l(()=>[i(d(c.name),1)]),_:2},1024))),128)),((a=t(r).giftcard_categories)==null?void 0:a.length)<0?(u(),_("p",kl,"Admin has not been assigned to any giftcard category")):j("",!0)]),o("div",bl,[xl,(u(!0),_(R,null,U(t(r).roles,c=>(u(),I(B,{color:"secondary",class:"ml-2 mb-2",key:c.id},{default:l(()=>[i(d(c.name),1)]),_:2},1024))),128)),((g=t(r).roles)==null?void 0:g.length)<0?(u(),_("p",Cl,"Admin has not been assigned to any role")):j("",!0)])])])])]}),_:1})]),_:1}),e(G,null,{default:l(()=>[e(H),e(v,{color:"secondary",class:"px-7",variant:"outlined",onClick:n[9]||(n[9]=s=>D.value=!1)},{default:l(()=>[wl]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(C,{justify:"center"},{default:l(()=>[e(L,{modelValue:t(V),"onUpdate:modelValue":n[12]||(n[12]=s=>P(V)?V.value=s:null),persistent:"","max-width":"500px"},{default:l(()=>[e(N,null,{default:l(()=>[e(Y,{class:"py-4"},{default:l(()=>[Al]),_:1}),e(O,null,{default:l(()=>[e(z,null,{default:l(()=>[o("div",Sl,[e(ne,{items:t(ge),label:"Roles",required:"","item-title":"name","item-value":"id",modelValue:t(A).role_id,"onUpdate:modelValue":n[11]||(n[11]=s=>t(A).role_id=s)},null,8,["items","modelValue"])])]),_:1})]),_:1}),e(G,null,{default:l(()=>[e(H),e(v,{color:"secondary",class:"px-7",variant:"outlined",onClick:we},{default:l(()=>[Dl]),_:1}),e(v,{loading:t(ve),color:"secondary",class:"px-12",variant:"flat",onClick:Ae},{default:l(()=>[Rl]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]))}});var Ll=Ye(Ul,[["__scopeId","data-v-3cce862b"]]);export{Ll as default};
